[{"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/index.js":"1","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/App.js":"2","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookIndex/BookIndex.js":"3","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/BookPage.js":"4","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/OtherUserPage/OtherUserPage.js":"5","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/UserPage.js":"6","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/Home/Home.js":"7","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/MainNav.js":"8","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookIndex/BookCard.js":"9","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/ReviewForm.js":"10","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/Timer.js":"11","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/SponsorForm.js":"12","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/SponsorList.js":"13","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookIndex/BackEndBookCard.js":"14","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/WaitList.js":"15","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/SignUp.js":"16","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/LogIn.js":"17","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/Search.js":"18","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/ReceivedList.js":"19"},{"size":312,"mtime":1612824521116,"results":"20","hashOfConfig":"21"},{"size":3537,"mtime":1620863360485,"results":"22","hashOfConfig":"21"},{"size":908,"mtime":1618430782336,"results":"23","hashOfConfig":"21"},{"size":17572,"mtime":1618430822795,"results":"24","hashOfConfig":"21"},{"size":11056,"mtime":1620070213281,"results":"25","hashOfConfig":"21"},{"size":7084,"mtime":1621891150354,"results":"26","hashOfConfig":"21"},{"size":6452,"mtime":1621891367298,"results":"27","hashOfConfig":"21"},{"size":2131,"mtime":1620865852131,"results":"28","hashOfConfig":"21"},{"size":781,"mtime":1614714057376,"results":"29","hashOfConfig":"21"},{"size":2704,"mtime":1615411637282,"results":"30","hashOfConfig":"21"},{"size":2523,"mtime":1615845016055,"results":"31","hashOfConfig":"21"},{"size":1461,"mtime":1615411676769,"results":"32","hashOfConfig":"21"},{"size":1729,"mtime":1614267711243,"results":"33","hashOfConfig":"21"},{"size":933,"mtime":1618430759612,"results":"34","hashOfConfig":"21"},{"size":1680,"mtime":1614713781400,"results":"35","hashOfConfig":"21"},{"size":3431,"mtime":1620866843847,"results":"36","hashOfConfig":"21"},{"size":2172,"mtime":1620866070782,"results":"37","hashOfConfig":"21"},{"size":1504,"mtime":1614714591609,"results":"38","hashOfConfig":"21"},{"size":1229,"mtime":1614628630045,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"49s28t",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/index.js",[],["81","82"],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/App.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookIndex/BookIndex.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/BookPage.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/OtherUserPage/OtherUserPage.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/UserPage.js",["83","84","85","86","87","88"],"import { Button } from 'semantic-ui-react'\nimport React, { useState, useEffect } from \"react\"\nimport { Redirect } from \"react-router-dom\";\nimport Timer from './Timer'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport { Image, Form } from 'semantic-ui-react'\nimport SponsorList from './SponsorList'\nimport WaitList from \"./WaitList\";\nimport ReceivedList from './ReceivedList'\n\nexport default function UserPage({user, savedBooks, timeLeft, setTimeLeft, reviewLeft, setReviewLeft}){\n\n    let waitingsFulFilledMapped = []\n    let mostRecent = {}\n    let foundBook = null\n    let foundReview = null\n    let waitlistMapped = 0\n    let displayTimer = false\n    \n    const [allWaitings, setAllWaitings] = useState([])\n    const [displayTimerTwo, setDisplayTimerTwo] = useState(true)\n    const [editInfo, setEditInfo] = useState(false)\n    const [formState, setFormState] = useState({})\n\n    \n    useEffect(()=>{\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n    .then(response=>response.json())\n    .then(data=>setAllWaitings(data))\n    },[])\n\n    function handleChange(e){\n        console.log(e)\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.value\n        })   \n    }\n\n    function handleImage (e){\n        e.persist()\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.files[0]\n        })\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const form = new FormData()\n\n        if (!(formState.username)){\n            alert('Please enter a username.')\n        }\n\n        form.append(\"profile_pic\", formState.profile_pic)\n        form.append(\"username\", formState.username)\n        form.append(\"name\", formState.name)\n        form.append(\"bio\", formState.bio)\n        form.append(\"email\", formState.email)\n    \n    }\n    \n    if (user){ \n        if (user.waitings.length < 1){\n            // console.log(`setTimeLeft(false)`)\n            setTimeLeft(false)\n            setReviewLeft(true)\n        }\n\n        let waitingsFulfilled = user.waitings.filter(waiting=>waiting.fulfilled===true) //get all fulfilled waitings for a user\n        for(let i = 0;i < waitingsFulfilled.length; i++){\n            waitingsFulFilledMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsFulfilled[i].book_id)) //create an array of those books by comparing to saved books\n        } \n        \n        if (waitingsFulfilled.length < 1){\n             setReviewLeft(true)\n        }\n        \n        if (waitingsFulfilled.length > 0){\n            mostRecent = (waitingsFulfilled.sort(function (a, b){ // find most recent received\n                return b.id - a.id\n            })[0])\n            if (Object.keys(mostRecent).length !== 0){ // if theres not most recent book\n                //check mostRecent.waiting date. if no time left between creation and future deadline, setTimeLeft(false), and vice versa\n                let creationDate = new Date(parseInt(mostRecent.sponsor_date)+60000).getTime()\n                let now = new Date().getTime()\n\n                if (now < creationDate){ // wait period has not passed\n                    displayTimer = true\n                }\n                else\n                {\n                    displayTimer = false\n                    console.log(`setTimeLeft(false)`)\n                    setTimeLeft(false)\n                }\n\n            }\n                foundBook = savedBooks.find(book=>book.id===mostRecent.book_id) // find most recently received book based on most recent waiting\n                if (foundBook){\n                    foundReview = foundBook.reviews.find(review=>review.user.id===user.id) // check if they left a review on it\n                    if (foundReview){\n                        setReviewLeft(true)\n                    }\n                    else{\n                        setReviewLeft(false) //if book was found without a review\n                    }\n                    \n                }\n                else{ // if no book is on received list\n                    setReviewLeft(true)\n                }\n        }\n         \n\n    }\n    if (user){\n\n        return(\n        <div className=\"userpage\"> \n\n        <div className=\"userpage-top-half\">\n\n             <div className=\"userpage-eligibility-info\" style={{float:'left'}}>\n                { displayTimer && displayTimerTwo ?\n                <Timer \n                    mostRecent={mostRecent}\n                    timeLeft={timeLeft} \n                    setTimeLeft={setTimeLeft}\n                    displayTimer={displayTimer}\n                    setDisplayTimerTwo={setDisplayTimerTwo}\n                    reviewLeft={reviewLeft}\n                />\n            : null}\n                {displayTimer === false && reviewLeft === true ? <h3>Looks like you're eligible for your next book!</h3> : null}\n                {reviewLeft === false && mostRecent!== null && (user.waitings.length > 0) ? (<div style={{margin:'auto'}} > <h3 >Please leave a review for</h3> <div style={{margin:'auto'}}><BackEndBookCard book={foundBook} style={{margin:'auto'}}/></div> </div>): null}\n            </div>\n            <div className=\"userpage-user-info\"  >\n                <h3>Profile</h3>\n                <Image src={user.profile_pic ? user.profile_pic : null} size=\"small\" circular style={{float:'left'}}/>\n                    {editInfo ? null :\n                    <div style={{float:'left', marginLeft: '50px'}}>\n                        <h4 style={{display:'inline'}}>Name: </h4>{user.name !== \"undefined\"? user.name : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Email: </h4>{user.email !== \"undefined\" ?  user.email : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Username: </h4>{user.username !== \"undefined\" ? user.username : null }\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Bio: </h4>{user.bio !== \"undefined\" ? user.bio : null}\n                    </div>\n                }\n\n            </div>        \n        </div>\n                <h3 className=\"pop\">Waitlist</h3>\n        \n                <WaitList\n                waitlistMapped={waitlistMapped}\n                user={user}\n                savedBooks={savedBooks}/>\n\n\n                <h3 className=\"pop\">Received</h3>\n                {waitingsFulFilledMapped.length > 0 ? \n                    <ReceivedList\n                    waitingsFulFilledMapped={waitingsFulFilledMapped}\n                    savedBooks={savedBooks}\n                    waitlistMapped={waitlistMapped}/>\n                :null}\n\n\n                <h3 className=\"pop\">Sponsored</h3>\n                <SponsorList\n                allWaitings={allWaitings}\n                savedBooks={savedBooks}\n                user={user}/>\n            </div>\n        )\n\n    }\n    else{\n        return <>\n        Error. Please try again\n            <Redirect to =\"/bookindex\"/>\n        </>\n    }\n}\n\n\n","/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/Home/Home.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/MainNav.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookIndex/BookCard.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/ReviewForm.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/Timer.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/SponsorForm.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/SponsorList.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookIndex/BackEndBookCard.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/WaitList.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/SignUp.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/LogIn.js",[],["89","90"],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/Search.js",[],"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/UserPage/ReceivedList.js",[],{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","replacedBy":"94"},{"ruleId":"95","severity":1,"message":"96","line":1,"column":10,"nodeType":"97","messageId":"98","endLine":1,"endColumn":16},{"ruleId":"95","severity":1,"message":"99","line":6,"column":17,"nodeType":"97","messageId":"98","endLine":6,"endColumn":21},{"ruleId":"95","severity":1,"message":"100","line":22,"column":22,"nodeType":"97","messageId":"98","endLine":22,"endColumn":33},{"ruleId":"95","severity":1,"message":"101","line":32,"column":14,"nodeType":"97","messageId":"98","endLine":32,"endColumn":26},{"ruleId":"95","severity":1,"message":"102","line":40,"column":14,"nodeType":"97","messageId":"98","endLine":40,"endColumn":25},{"ruleId":"95","severity":1,"message":"103","line":48,"column":14,"nodeType":"97","messageId":"98","endLine":48,"endColumn":26},{"ruleId":"91","replacedBy":"104"},{"ruleId":"93","replacedBy":"105"},"no-native-reassign",["106"],"no-negated-in-lhs",["107"],"no-unused-vars","'Button' is defined but never used.","Identifier","unusedVar","'Form' is defined but never used.","'setEditInfo' is assigned a value but never used.","'handleChange' is defined but never used.","'handleImage' is defined but never used.","'handleSubmit' is defined but never used.",["106"],["107"],"no-global-assign","no-unsafe-negation"]