{"ast":null,"code":"var _jsxFileName = \"/Users/simoncohen/Flatiron/Mod5/frontend-bookfund/src/components/pages/UserPage/UserPage.js\",\n    _s = $RefreshSig$();\n\nimport { Button } from 'semantic-ui-react';\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Timer from './Timer';\nimport BackEndBookCard from '../BookIndex/BackEndBookCard';\nimport { Image, Form } from 'semantic-ui-react';\nimport SponsorList from './SponsorList';\nimport WaitList from \"./WaitList\";\nimport ReceivedList from './ReceivedList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UserPage({\n  user,\n  setUser,\n  savedBooks,\n  timeLeft,\n  setTimeLeft,\n  reviewLeft,\n  setReviewLeft\n}) {\n  _s();\n\n  let waitingsFulFilledMapped = [];\n  let mostRecent = {};\n  let foundBook = null;\n  let foundReview = null;\n  let waitlistMapped = 0;\n  let displayTimer = false;\n  const [allWaitings, setAllWaitings] = useState([]);\n  const [displayTimerTwo, setDisplayTimerTwo] = useState(true);\n  const [editInfo] = useState(false);\n  const [formState, setFormState] = useState({});\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`).then(response => response.json()).then(data => setAllWaitings(data));\n  }, []);\n\n  function handleChange(e) {\n    console.log(e);\n    setFormState({ ...formState,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  function handleImage(e) {\n    e.persist();\n    setFormState({ ...formState,\n      [e.target.name]: e.target.files[0]\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const form = new FormData();\n\n    if (!formState.username) {\n      alert('Please enter a username.');\n    }\n\n    form.append(\"profile_pic\", formState.profile_pic);\n    form.append(\"username\", formState.username);\n    form.append(\"name\", formState.name);\n    form.append(\"bio\", formState.bio);\n    form.append(\"email\", formState.email);\n  }\n\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userpage\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userpage-top-half\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userpage-eligibility-info\",\n          style: {\n            float: 'left'\n          },\n          children: [displayTimer && displayTimerTwo ? /*#__PURE__*/_jsxDEV(Timer, {\n            mostRecent: mostRecent,\n            timeLeft: timeLeft,\n            setTimeLeft: setTimeLeft,\n            displayTimer: displayTimer,\n            setDisplayTimerTwo: setDisplayTimerTwo,\n            reviewLeft: reviewLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this) : null, displayTimer === false && reviewLeft === true ? /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Looks like you're eligible for your next book!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 66\n          }, this) : null, reviewLeft === false && mostRecent !== null && user.waitings.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: 'auto'\n            },\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Please leave a review for\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 125\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: 'auto'\n              },\n              children: /*#__PURE__*/_jsxDEV(BackEndBookCard, {\n                book: foundBook,\n                style: {\n                  margin: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 190\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 161\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 94\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userpage-user-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Image, {\n            src: user.profile_pic ? user.profile_pic : null,\n            size: \"small\",\n            circular: true,\n            style: {\n              float: 'left'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), editInfo ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              float: 'left',\n              marginLeft: '50px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                display: 'inline'\n              },\n              children: \"Name: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this), user.name !== \"undefined\" ? user.name : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                display: 'inline'\n              },\n              children: \"Email: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 25\n            }, this), user.email !== \"undefined\" ? user.email : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                display: 'inline'\n              },\n              children: \"Username: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this), user.username !== \"undefined\" ? user.username : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                display: 'inline'\n              },\n              children: \"Bio: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this), user.bio !== \"undefined\" ? user.bio : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), editInfo ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              float: 'left',\n              marginLeft: '50px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: e => handleSubmit(e),\n              children: [/*#__PURE__*/_jsxDEV(Form.Field, {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Name\",\n                  name: \"name\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Username\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Username\",\n                  name: \"username\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Email\",\n                  name: \"email\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Password\",\n                  type: \"password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Bio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Bio\",\n                  name: \"bio\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n                type: \"file\",\n                name: \"profile_pic\",\n                fluid: true,\n                label: \"Image Upload\",\n                onChange: e => handleImage(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                style: {\n                  float: 'right',\n                  marginBottom: '10px'\n                },\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"pop\",\n        children: \"Waitlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WaitList, {\n        waitlistMapped: waitlistMapped,\n        user: user,\n        setUser: setUser,\n        savedBooks: savedBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"pop\",\n        children: \"Received\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), waitingsFulFilledMapped.length > 0 ? /*#__PURE__*/_jsxDEV(ReceivedList, {\n        waitingsFulFilledMapped: waitingsFulFilledMapped,\n        savedBooks: savedBooks,\n        waitlistMapped: waitlistMapped\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"pop\",\n        children: \"Sponsored\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SponsorList, {\n        allWaitings: allWaitings,\n        savedBooks: savedBooks,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\"Error. Please try again\", /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/bookindex\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n}\n\n_s(UserPage, \"Uq056j9EvH9TBC9/K+ELLWDMy/Q=\");\n\n_c = UserPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"sources":["/Users/simoncohen/Flatiron/Mod5/frontend-bookfund/src/components/pages/UserPage/UserPage.js"],"names":["Button","React","useState","useEffect","Redirect","Timer","BackEndBookCard","Image","Form","SponsorList","WaitList","ReceivedList","UserPage","user","setUser","savedBooks","timeLeft","setTimeLeft","reviewLeft","setReviewLeft","waitingsFulFilledMapped","mostRecent","foundBook","foundReview","waitlistMapped","displayTimer","allWaitings","setAllWaitings","displayTimerTwo","setDisplayTimerTwo","editInfo","formState","setFormState","fetch","process","env","REACT_APP_API_BASE_URL","then","response","json","data","handleChange","e","console","log","target","name","value","handleImage","persist","files","handleSubmit","preventDefault","form","FormData","username","alert","append","profile_pic","bio","email","float","waitings","length","margin","marginLeft","display","marginBottom"],"mappings":"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","sourcesContent":["import { Button } from 'semantic-ui-react'\nimport React, { useState, useEffect } from \"react\"\nimport { Redirect } from \"react-router-dom\";\nimport Timer from './Timer'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport { Image, Form } from 'semantic-ui-react'\nimport SponsorList from './SponsorList'\nimport WaitList from \"./WaitList\";\nimport ReceivedList from './ReceivedList'\n\nexport default function UserPage({user, setUser, savedBooks, timeLeft, setTimeLeft, reviewLeft, setReviewLeft}){\n\n    let waitingsFulFilledMapped = []\n    let mostRecent = {}\n    let foundBook = null\n    let foundReview = null\n    let waitlistMapped = 0\n    let displayTimer = false\n    \n    const [allWaitings, setAllWaitings] = useState([])\n    const [displayTimerTwo, setDisplayTimerTwo] = useState(true)\n    const [editInfo] = useState(false)\n    const [formState, setFormState] = useState({})\n\n    \n    useEffect(()=>{\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n    .then(response=>response.json())\n    .then(data=>setAllWaitings(data))\n    },[])\n\n    function handleChange(e){\n        console.log(e)\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.value\n        })   \n    }\n\n    function handleImage (e){\n        e.persist()\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.files[0]\n        })\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const form = new FormData()\n\n        if (!(formState.username)){\n            alert('Please enter a username.')\n        }\n\n        form.append(\"profile_pic\", formState.profile_pic)\n        form.append(\"username\", formState.username)\n        form.append(\"name\", formState.name)\n        form.append(\"bio\", formState.bio)\n        form.append(\"email\", formState.email)\n    \n    }\n    \n    \n    if (user){\n\n        return(\n        <div className=\"userpage\"> \n\n        <div className=\"userpage-top-half\">\n\n             <div className=\"userpage-eligibility-info\" style={{float:'left'}}>\n                { displayTimer && displayTimerTwo ?\n                <Timer \n                    mostRecent={mostRecent}\n                    timeLeft={timeLeft} \n                    setTimeLeft={setTimeLeft}\n                    displayTimer={displayTimer}\n                    setDisplayTimerTwo={setDisplayTimerTwo}\n                    reviewLeft={reviewLeft}\n                />\n            : null}\n                {displayTimer === false && reviewLeft === true ? <h3>Looks like you're eligible for your next book!</h3> : null}\n                {reviewLeft === false && mostRecent!== null && (user.waitings.length > 0) ? (<div style={{margin:'auto'}} > <h3 >Please leave a review for</h3> <div style={{margin:'auto'}}><BackEndBookCard book={foundBook} style={{margin:'auto'}}/></div> </div>): null}\n            </div>\n            <div className=\"userpage-user-info\"  >\n                <h3>Profile</h3>\n                <Image src={user.profile_pic ? user.profile_pic : null} size=\"small\" circular style={{float:'left'}}/>\n                    {editInfo ? null :\n                    <div style={{float:'left', marginLeft: '50px'}}>\n                        <h4 style={{display:'inline'}}>Name: </h4>{user.name !== \"undefined\"? user.name : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Email: </h4>{user.email !== \"undefined\" ?  user.email : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Username: </h4>{user.username !== \"undefined\" ? user.username : null }\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Bio: </h4>{user.bio !== \"undefined\" ? user.bio : null}\n                    </div>\n                }\n\n                {editInfo ? \n                <div style={{float:'left', marginLeft: '50px'}}>\n                     <Form onSubmit={(e)=>handleSubmit(e)}>\n                        <Form.Field>\n                            <label>Name</label>\n                            <input placeholder='Name' name=\"name\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Username</label>\n                            <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Email</label>\n                            <input placeholder='Email' name=\"email\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Password</label>\n                            <input placeholder='Password' type=\"password\" />\n                        </Form.Field>\n                        <Form.Field >\n                            <label>Bio</label>\n                            <input placeholder='Bio' name=\"bio\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Input \n                        type=\"file\" \n                        name=\"profile_pic\" \n                        fluid label='Image Upload' \n                        onChange={(e)=>handleImage(e)} \n                        />\n                    <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Sign Up</Button>\n                    </Form>   \n                </div>\n                    \n                : null}\n\n                {/* <Button style={{float:'right', marginRight: '50px'}} onClick={()=>setEditInfo(!editInfo)}> Edit Profile Info </Button> */}\n            \n            </div>\n\n                \n\n\n\n\n\n                    \n        \n        \n        </div>\n                <h3 className=\"pop\">Waitlist</h3>\n        \n                <WaitList\n                waitlistMapped={waitlistMapped}\n                user={user}\n                setUser={setUser}\n                savedBooks={savedBooks}/>\n\n\n                <h3 className=\"pop\">Received</h3>\n                {waitingsFulFilledMapped.length > 0 ? \n                    <ReceivedList\n                    waitingsFulFilledMapped={waitingsFulFilledMapped}\n                    savedBooks={savedBooks}\n                    waitlistMapped={waitlistMapped}/>\n                :null}\n\n\n                <h3 className=\"pop\">Sponsored</h3>\n                <SponsorList\n                allWaitings={allWaitings}\n                savedBooks={savedBooks}\n                user={user}/>\n            </div>\n        )\n\n    }\n    else{\n        return <>\n        Error. Please try again\n            <Redirect to =\"/bookindex\"/>\n        </>\n    }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}