{"ast":null,"code":"import _slicedToArray from\"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SponsorForm(_ref){var waitingsMapped=_ref.waitingsMapped,book=_ref.book,user=_ref.user,setUser=_ref.setUser,waitlistRequest=_ref.waitlistRequest,setWaitlistRequest=_ref.setWaitlistRequest,setBackEndBook=_ref.setBackEndBook,backEndBook=_ref.backEndBook,toggleSponsorForm=_ref.toggleSponsorForm,setToggleSponsorForm=_ref.setToggleSponsorForm;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),number=_useState2[0],setNumber=_useState2[1];function handleSponsorSubmission(e){e.preventDefault();var confObj={method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({num_books_funded:e.target.number.value,sponsor_id:user.id})};fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/waitings/sponsor/\").concat(book.id),confObj).then(function(response){return response.json();}).then(function(data){setToggleSponsorForm(!toggleSponsorForm);setWaitlistRequest(!waitlistRequest);});}return/*#__PURE__*/_jsxs(\"form\",{className:\"signup\",onSubmit:function onSubmit(e){return handleSponsorSubmission(e);},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Number of copies I'd like to sponsor:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"number\",value:number,onChange:function onChange(e){return setNumber(e.target.value);}}),number>waitingsMapped.length?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"Please enter a number smaller than the waitlist total\"}):null,/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Sponsor\",className:\"button\"})]});}","map":{"version":3,"sources":["/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/BookPage/SponsorForm.js"],"names":["useState","SponsorForm","waitingsMapped","book","user","setUser","waitlistRequest","setWaitlistRequest","setBackEndBook","backEndBook","toggleSponsorForm","setToggleSponsorForm","number","setNumber","handleSponsorSubmission","e","preventDefault","confObj","method","headers","body","JSON","stringify","num_books_funded","target","value","sponsor_id","id","fetch","process","env","REACT_APP_API_BASE_URL","then","response","json","data","length","color"],"mappings":"sJAAA,OAAQA,QAAR,KAAwB,OAAxB,C,wFAEA,cAAe,SAASC,CAAAA,WAAT,MAAsK,IAAhJC,CAAAA,cAAgJ,MAAhJA,cAAgJ,CAAhIC,IAAgI,MAAhIA,IAAgI,CAA1HC,IAA0H,MAA1HA,IAA0H,CAApHC,OAAoH,MAApHA,OAAoH,CAA3GC,eAA2G,MAA3GA,eAA2G,CAA1FC,kBAA0F,MAA1FA,kBAA0F,CAAtEC,cAAsE,MAAtEA,cAAsE,CAAtDC,WAAsD,MAAtDA,WAAsD,CAAzCC,iBAAyC,MAAzCA,iBAAyC,CAAtBC,oBAAsB,MAAtBA,oBAAsB,eAGtJX,QAAQ,CAAC,CAAD,CAH8I,wCAG3KY,MAH2K,eAGnKC,SAHmK,eAMjL,QAASC,CAAAA,uBAAT,CAAiCC,CAAjC,CAAmC,CAC/BA,CAAC,CAACC,cAAF,GAEA,GAAIC,CAAAA,OAAO,CAAG,CACVC,MAAM,CAAE,OADE,CAEVC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFC,CAKVC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACC,gBAAgB,CAAER,CAAC,CAACS,MAAF,CAASZ,MAAT,CAAgBa,KAAnC,CAA0CC,UAAU,CAAEtB,IAAI,CAACuB,EAA3D,CAAf,CALI,CAAd,CAOAC,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,8BAA2D5B,IAAI,CAACwB,EAAhE,EAAsEV,OAAtE,CAAL,CACCe,IADD,CACM,SAAAC,QAAQ,QAAEA,CAAAA,QAAQ,CAACC,IAAT,EAAF,EADd,EAECF,IAFD,CAEM,SAAAG,IAAI,CAAE,CACRxB,oBAAoB,CAAC,CAACD,iBAAF,CAApB,CACAH,kBAAkB,CAAC,CAACD,eAAF,CAAlB,CACH,CALD,EAQH,CAEG,mBACI,cAAM,SAAS,CAAC,QAAhB,CAAyB,QAAQ,CAAE,kBAAAS,CAAC,QAAED,CAAAA,uBAAuB,CAACC,CAAD,CAAzB,EAApC,wBACI,gEADJ,cAEQ,cAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,QAA1B,CAAmC,KAAK,CAAEH,MAA1C,CAAkD,QAAQ,CAAE,kBAAAG,CAAC,QAAEF,CAAAA,SAAS,CAACE,CAAC,CAACS,MAAF,CAASC,KAAV,CAAX,EAA7D,EAFR,CAGSb,MAAM,CAAGV,cAAc,CAACkC,MAAxB,cACG,UAAG,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAT,CAAV,mEADH,CAEG,IALZ,cAMQ,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,SAA3B,CAAqC,SAAS,CAAC,QAA/C,EANR,GADJ,CAWH","sourcesContent":["import {useState } from \"react\";\n\nexport default function SponsorForm({waitingsMapped, book, user, setUser, waitlistRequest, setWaitlistRequest, setBackEndBook, backEndBook, toggleSponsorForm, setToggleSponsorForm}){\n    \n\n    const[number, setNumber] = useState(0)\n\n\n    function handleSponsorSubmission(e){\n        e.preventDefault()\n\n        let confObj = {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({num_books_funded: e.target.number.value, sponsor_id: user.id })\n        }\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings/sponsor/${book.id}`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            setToggleSponsorForm(!toggleSponsorForm)\n            setWaitlistRequest(!waitlistRequest)\n        })\n   \n\n    }\n\n        return (\n            <form className=\"signup\" onSubmit={e=>handleSponsorSubmission(e)} >\n                <label>Number of copies I'd like to sponsor:</label>\n                    <input type=\"number\" name=\"number\" value={number} onChange={e=>setNumber(e.target.value)}/>\n                    {number > waitingsMapped.length ? (\n                        <p style={{ color: \"red\" }}>Please enter a number smaller than the waitlist total</p>\n                    ) : null}\n                    <input type=\"submit\" value=\"Sponsor\" className=\"button\"/>\n            </form>\n        )\n\n    }\n    "]},"metadata":{},"sourceType":"module"}