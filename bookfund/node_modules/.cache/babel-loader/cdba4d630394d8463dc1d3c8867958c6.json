{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserWebSocketTransport = void 0;\n\nclass BrowserWebSocketTransport {\n  constructor(ws) {\n    this._ws = ws;\n\n    this._ws.addEventListener('message', event => {\n      if (this.onmessage) this.onmessage.call(null, event.data);\n    });\n\n    this._ws.addEventListener('close', () => {\n      if (this.onclose) this.onclose.call(null);\n    }); // Silently ignore all errors - we don't know what to do with them.\n\n\n    this._ws.addEventListener('error', () => {});\n\n    this.onmessage = null;\n    this.onclose = null;\n  }\n\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n      ws.addEventListener('open', () => resolve(new BrowserWebSocketTransport(ws)));\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  send(message) {\n    this._ws.send(message);\n  }\n\n  close() {\n    this._ws.close();\n  }\n\n}\n\nexports.BrowserWebSocketTransport = BrowserWebSocketTransport;","map":{"version":3,"sources":["../../../../src/common/BrowserWebSocketTransport.ts"],"names":[],"mappings":";;;;;;;AAiBA,MAAa,yBAAb,CAAsC;AAgBpC,EAAA,WAAA,CAAY,EAAZ,EAAyB;AACvB,SAAK,GAAL,GAAW,EAAX;;AACA,SAAK,GAAL,CAAS,gBAAT,CAA0B,SAA1B,EAAsC,KAAD,IAAU;AAC7C,UAAI,KAAK,SAAT,EAAoB,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,KAAK,CAAC,IAAhC;AACrB,KAFD;;AAGA,SAAK,GAAL,CAAS,gBAAT,CAA0B,OAA1B,EAAmC,MAAK;AACtC,UAAI,KAAK,OAAT,EAAkB,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB;AACnB,KAFD,EALuB,CAQvB;;;AACA,SAAK,GAAL,CAAS,gBAAT,CAA0B,OAA1B,EAAmC,MAAK,CAAG,CAA3C;;AACA,SAAK,SAAL,GAAiB,IAAjB;AACA,SAAK,OAAL,GAAe,IAAf;AACD;;AA3BY,SAAN,MAAM,CAAC,GAAD,EAAY;AACvB,WAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAoB;AACrC,YAAM,EAAE,GAAG,IAAI,SAAJ,CAAc,GAAd,CAAX;AAEA,MAAA,EAAE,CAAC,gBAAH,CAAoB,MAApB,EAA4B,MAC1B,OAAO,CAAC,IAAI,yBAAJ,CAA8B,EAA9B,CAAD,CADT;AAGA,MAAA,EAAE,CAAC,gBAAH,CAAoB,OAApB,EAA6B,MAA7B;AACD,KAPM,CAAP;AAQD;;AAoBD,EAAA,IAAI,CAAC,OAAD,EAAgB;AAClB,SAAK,GAAL,CAAS,IAAT,CAAc,OAAd;AACD;;AAED,EAAA,KAAK,GAAA;AACH,SAAK,GAAL,CAAS,KAAT;AACD;;AApCmC;;AAAtC,OAAA,CAAA,yBAAA,GAAA,yBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserWebSocketTransport = void 0;\nclass BrowserWebSocketTransport {\n    constructor(ws) {\n        this._ws = ws;\n        this._ws.addEventListener('message', (event) => {\n            if (this.onmessage)\n                this.onmessage.call(null, event.data);\n        });\n        this._ws.addEventListener('close', () => {\n            if (this.onclose)\n                this.onclose.call(null);\n        });\n        // Silently ignore all errors - we don't know what to do with them.\n        this._ws.addEventListener('error', () => { });\n        this.onmessage = null;\n        this.onclose = null;\n    }\n    static create(url) {\n        return new Promise((resolve, reject) => {\n            const ws = new WebSocket(url);\n            ws.addEventListener('open', () => resolve(new BrowserWebSocketTransport(ws)));\n            ws.addEventListener('error', reject);\n        });\n    }\n    send(message) {\n        this._ws.send(message);\n    }\n    close() {\n        this._ws.close();\n    }\n}\nexports.BrowserWebSocketTransport = BrowserWebSocketTransport;\n//# sourceMappingURL=BrowserWebSocketTransport.js.map"]},"metadata":{},"sourceType":"script"}