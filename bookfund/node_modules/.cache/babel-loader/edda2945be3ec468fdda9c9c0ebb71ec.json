{"ast":null,"code":"import _defineProperty from\"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{Button,Modal,Form}from'semantic-ui-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LogIn(_ref){var setUser=_ref.setUser,user=_ref.user;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formState=_useState4[0],setFormState=_useState4[1];useEffect(function(){history.push('/userpage');},[user,history]);function handleChange(e){setFormState(_defineProperty({},e.target.name,e.target.value));}function handleSubmit(e){e.preventDefault();setOpen(false);var confObj={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formState)};fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/users/login\"),confObj).then(function(response){return response.json();}).then(function(data){// console.log(data)\nsetUser(data);history.push('/userpage');});}return/*#__PURE__*/_jsxs(Modal,{onClose:function onClose(){return setOpen(false);},onOpen:function onOpen(){return setOpen(true);},open:open,trigger:/*#__PURE__*/_jsx(Button,{children:\" Log In \"}),children:[/*#__PURE__*/_jsx(Modal.Header,{children:\"Log In\"}),/*#__PURE__*/_jsx(Modal.Content,{children:/*#__PURE__*/_jsx(\"div\",{className:\"form \",children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",name:\"username\",onChange:function onChange(e){return handleChange(e);}})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",type:\"password\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{float:'right',marginBottom:'10px'},children:\"Login\"})]})})})]});}","map":{"version":3,"sources":["/Users/simoncohen/Flatiron/Mod5/bookfund/frontend-bookfund/bookfund/src/components/pages/MainNav/LogIn.js"],"names":["React","useEffect","useState","useHistory","Button","Modal","Form","LogIn","setUser","user","history","open","setOpen","formState","setFormState","push","handleChange","e","target","name","value","handleSubmit","preventDefault","confObj","method","headers","body","JSON","stringify","fetch","process","env","REACT_APP_API_BASE_URL","then","response","json","data","float","marginBottom"],"mappings":"8SAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAyBC,QAAzB,KAAwC,OAAxC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,IAAxB,KAAoC,mBAApC,C,wFAEA,cAAe,SAASC,CAAAA,KAAT,MAAgC,IAAfC,CAAAA,OAAe,MAAfA,OAAe,CAANC,IAAM,MAANA,IAAM,CAE3C,GAAIC,CAAAA,OAAO,CAAGP,UAAU,EAAxB,CAF2C,cAInBD,QAAQ,CAAC,KAAD,CAJW,wCAIpCS,IAJoC,eAI9BC,OAJ8B,8BAKTV,QAAQ,CAAC,EAAD,CALC,yCAKpCW,SALoC,eAKzBC,YALyB,eAO3Cb,SAAS,CAAC,UAAI,CACVS,OAAO,CAACK,IAAR,CAAa,WAAb,EACH,CAFQ,CAEP,CAACN,IAAD,CAAOC,OAAP,CAFO,CAAT,CAIA,QAASM,CAAAA,YAAT,CAAsBC,CAAtB,CAAwB,CACpBH,YAAY,oBACPG,CAAC,CAACC,MAAF,CAASC,IADF,CACSF,CAAC,CAACC,MAAF,CAASE,KADlB,EAAZ,CAGH,CAED,QAASC,CAAAA,YAAT,CAAsBJ,CAAtB,CAAwB,CACpBA,CAAC,CAACK,cAAF,GACAV,OAAO,CAAC,KAAD,CAAP,CACA,GAAIW,CAAAA,OAAO,CAAG,CACVC,MAAM,CAAE,MADE,CAEVC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFC,CAKVC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAef,SAAf,CALI,CAAd,CAQAgB,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,iBAAsDT,OAAtD,CAAL,CACCU,IADD,CACM,SAAAC,QAAQ,QAAEA,CAAAA,QAAQ,CAACC,IAAT,EAAF,EADd,EAECF,IAFD,CAEM,SAAAG,IAAI,CAAE,CACR;AACA5B,OAAO,CAAC4B,IAAD,CAAP,CACA1B,OAAO,CAACK,IAAR,CAAa,WAAb,EACH,CAND,EAQH,CAED,mBACI,MAAC,KAAD,EACI,OAAO,CAAE,yBAAMH,CAAAA,OAAO,CAAC,KAAD,CAAb,EADb,CAEI,MAAM,CAAE,wBAAMA,CAAAA,OAAO,CAAC,IAAD,CAAb,EAFZ,CAGI,IAAI,CAAED,IAHV,CAII,OAAO,cAAI,KAAC,MAAD,uBAJf,wBAMA,KAAC,KAAD,CAAO,MAAP,qBANA,cAOI,KAAC,KAAD,CAAO,OAAP,wBACI,YAAK,SAAS,CAAC,OAAf,uBACQ,MAAC,IAAD,EAAM,QAAQ,CAAE,kBAACM,CAAD,QAAKI,CAAAA,YAAY,CAACJ,CAAD,CAAjB,EAAhB,wBACI,MAAC,IAAD,CAAM,KAAN,yBACI,mCADJ,cAEI,cAAO,WAAW,CAAC,UAAnB,CAA8B,IAAI,CAAC,UAAnC,CAA8C,QAAQ,CAAE,kBAACA,CAAD,QAAKD,CAAAA,YAAY,CAACC,CAAD,CAAjB,EAAxD,EAFJ,GADJ,cAMI,MAAC,IAAD,CAAM,KAAN,yBACI,mCADJ,cAEI,cAAO,WAAW,CAAC,UAAnB,CAA8B,IAAI,CAAC,UAAnC,EAFJ,GANJ,cAUI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAE,CAACoB,KAAK,CAAC,OAAP,CAAgBC,YAAY,CAAE,MAA9B,CAA7B,mBAVJ,GADR,EADJ,EAPJ,GADJ,CA2BH","sourcesContent":["import React,{useEffect, useState} from \"react\"\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Modal, Form } from 'semantic-ui-react'\n\nexport default function LogIn ({setUser, user}){\n\n    let history = useHistory()\n\n    const [open, setOpen] = useState(false)\n    const [formState, setFormState] = useState({})\n\n    useEffect(()=>{\n        history.push('/userpage')\n    },[user, history])\n\n    function handleChange(e){\n        setFormState({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        setOpen(false)\n        let confObj = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(formState),\n        }\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users/login`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            // console.log(data)\n            setUser(data)      \n            history.push('/userpage')\n        })\n\n    }\n\n    return (\n        <Modal\n            onClose={() => setOpen(false)}\n            onOpen={() => setOpen(true)}\n            open={open}\n            trigger = {<Button> Log In </Button>}\n        >\n        <Modal.Header>Log In</Modal.Header>\n            <Modal.Content >\n                <div className=\"form \">\n                        <Form onSubmit={(e)=>handleSubmit(e)}>\n                            <Form.Field>\n                                <label>Username</label>\n                                <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                                \n                            </Form.Field>\n                            <Form.Field>\n                                <label>Password</label>\n                                <input placeholder='Password' type=\"password\" />\n                            </Form.Field>\n                            <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Login</Button>\n                        </Form>\n                    </div>\n            </Modal.Content>\n        </Modal>\n        \n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}