{"version":3,"sources":["components/pages/MainNav/Search.js","components/pages/MainNav/SignUp.js","components/pages/MainNav/LogIn.js","components/pages/MainNav/MainNav.js","components/pages/BookIndex/BookCard.js","components/pages/BookIndex/BookIndex.js","components/pages/BookPage/SponsorForm.js","components/pages/BookPage/ReviewForm.js","components/pages/BookPage/BookPage.js","components/pages/BookIndex/BackEndBookCard.js","components/pages/Home/Home.js","components/pages/UserPage/Timer.js","components/pages/UserPage/SponsorList.js","components/pages/UserPage/WaitList.js","components/pages/UserPage/ReceivedList.js","components/pages/UserPage/UserPage.js","components/pages/OtherUserPage/OtherUserPage.js","App.js","index.js"],"names":["Search","setBooksFromSearch","startIndex","setStartIndex","useState","searchInput","setSearchInput","history","useHistory","useEffect","searchTerms","replace","fetch","then","response","json","data","items","onSubmit","e","preventDefault","push","Input","icon","placeholder","type","onChange","target","value","className","SignUp","user","setUser","open","setOpen","eligible","formState","setFormState","handleChange","name","Modal","onClose","onOpen","trigger","Button","Header","Content","Form","form","FormData","username","alert","append","profile_pic","bio","email","confObj","method","body","process","error","handleSubmit","Field","fluid","label","persist","files","handleImage","style","float","marginBottom","LogIn","headers","JSON","stringify","MainNav","to","color","onClick","BookCard","book","Card","textAlign","Image","size","src","volumeInfo","imageLinks","thumbnail","wrapped","ui","title","id","slice","Description","authors","BookIndex","booksFromSearch","booksMapped","map","marginTop","Group","itemsPerRow","SponsorForm","waitingsMapped","waitlistRequest","setWaitlistRequest","toggleSponsorForm","setBackEndBook","backEndBook","setToggleSponsorForm","number","setNumber","num_books_funded","sponsor_id","handleSponsorSubmission","length","ReviewForm","setSavedBooks","waitListRequestAndStoreInDBRequest","storeInDB","text","rating","count","color2","reply","TextArea","rows","cols","user_id","book_id","content","labelPosition","primary","BookPage","savedBooks","reviewLeft","setBook","params","useParams","bookId","setBookId","similarIndex","setSimilarIndex","users","setUsers","waitingsFulfilledMapped","reviewsMapped","averageRating","sponsorsMapped","stripHtml","html","tmp","document","createElement","innerHTML","textContent","innerText","bookIdea","fulfilled","foundBook","find","api_id","subtitle","publisher","publishedDate","description","image_url","join","waitings","reviews","split","pop","sponsorsFiltered","filter","waiting","arr","x","wait","elem","circular","review","reduce","accumulator","currentValue","edit","reviewId","parseInt","handleCommentDelete","margin","BackendBookCard","Meta","Home","books","setBooks","backEndWaitings","setBackEndWaitings","index","setIndex","topReadersMapped","i","waitingsFulFilled","sort","a","b","Object","keys","values","sponsoredWaitings","sponsorAOH","userSponsors","sponsor","extra","Icon","reader","fontSize","display","Timer","mostRecent","setTimeLeft","timeLeft","setDisplayTimerTwo","displayTimer","timerDays","setTimerDays","timerHours","setTimerHours","timerMinutes","setTimerMinutes","timerSeconds","setTimerSeconds","interval","useRef","current","countDownDate","Date","sponsor_date","setInterval","now","getTime","timeRemaining","days","Math","floor","hours","minutes","seconds","clearInterval","startTimer","class","SponsorList","allWaitings","sponsoredMapped","sponsoredIndex","setSponsoredIndex","arrTwo","savedBook","console","log","WaitList","waitlistMapped","waitlistIndex","setWaitlistIndex","waitingsUnfulfilled","saved_book","ReceivedList","waitingsFulFilledMapped","receivedMapped","UserPage","setReviewLeft","foundReview","setAllWaitings","displayTimerTwo","editInfo","waitingsFulfilled","creationDate","marginLeft","OtherUserPage","App","exact","from","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2741be07.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useHistory } from \"react-router-dom\";\n\nimport { Input } from 'semantic-ui-react'\n\nexport default function Search ({setBooksFromSearch, startIndex, setStartIndex}){\n\n    const [searchInput, setSearchInput] = useState(\"\")\n    const history = useHistory()\n\n    useEffect(()=>{\n        let searchTerms = searchInput.replace(/\\s/g, '+')\n        fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerms}&maxResults=8&startIndex=${startIndex}`)\n        .then(response=>response.json())\n        .then(data=>{\n            setBooksFromSearch(data.items)\n        })\n    },[startIndex, searchInput, setBooksFromSearch])\n\n    function handleSubmit(e){\n        e.preventDefault()\n        setStartIndex(0)\n        let searchTerms = searchInput.replace(/\\s/g, '+')\n        fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerms}&maxResults=8&startIndex=${startIndex}`)\n        .then(response=>response.json())\n        .then(data=>{\n            setBooksFromSearch(data.items)\n            history.push(`/bookindex`)\n        })\n    }\n\n    return(\n        \n            <form onSubmit={handleSubmit}>\n                <Input icon='search' placeholder='Search...' \n                type=\"text\"\n                onChange={e=>setSearchInput(e.target.value)}\n                value={searchInput}\n                className=\"search-input\"/>\n            {/* <button type='submit' className=\"fa fa-search\"> Search </button> */}\n            </form>\n    )\n}","import React,{useState} from \"react\"\nimport { Button, Modal, Form } from 'semantic-ui-react'\nimport { useHistory } from \"react-router-dom\";\n\n\nexport default function SignUp({user, setUser}) {\n\n    let history = useHistory()\n    const [open, setOpen] = useState(false)\n    const [formState, setFormState] = useState({\n            eligible: true\n        })\n\n    function handleChange(e){\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.value\n        })   \n    }\n\n    function handleImage (e){\n        e.persist()\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.files[0]\n        })\n    }\n\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const form = new FormData()\n\n        if (!(formState.username)){\n            alert('Please enter a username.')\n        }\n\n        form.append(\"profile_pic\", formState.profile_pic)\n        form.append(\"username\", formState.username)\n        form.append(\"name\", formState.name)\n        form.append(\"bio\", formState.bio)\n        form.append(\"email\", formState.email)\n      \n\n        // console.log(formState)\n        \n        let confObj = {\n            method: 'POST',\n            body: (form),\n        }\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            if (data.error){\n                alert(\"Username must be unique\")\n                setFormState({})\n            }\n            else{\n                alert(`welcome aboard ${data.username}!`)\n                setUser(data)\n                setFormState({})\n                history.push('/userpage')\n            }\n        })\n    \n    }\n  \n  return (\n    <Modal\n      onClose={() => setOpen(false)}\n      onOpen={() => setOpen(true)}\n      open={open}\n      trigger={<Button>Sign Up</Button>}\n    >\n      <Modal.Header>Sign Up</Modal.Header>\n      <Modal.Content >\n       \n        <Form onSubmit={(e)=>handleSubmit(e)}>\n                    <Form.Field>\n                        <label>Name</label>\n                        <input placeholder='Name' name=\"name\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Username</label>\n                        <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Email</label>\n                        <input placeholder='Email' name=\"email\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Password</label>\n                        <input placeholder='Password' type=\"password\" />\n                    </Form.Field>\n                    <Form.Field >\n                        <label>Bio</label>\n                        <input placeholder='Bio' name=\"bio\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Input \n                    type=\"file\" \n                    name=\"profile_pic\" \n                    fluid label='Image Upload' \n                    onChange={(e)=>handleImage(e)} \n                    />\n                    <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Sign Up</Button>\n            </Form>\n         \n      </Modal.Content>\n\n    </Modal>\n  )\n}\n\n\n\n","import React,{useEffect, useState} from \"react\"\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Modal, Form } from 'semantic-ui-react'\n\nexport default function LogIn ({setUser, user}){\n\n    let history = useHistory()\n\n    const [open, setOpen] = useState(false)\n    const [formState, setFormState] = useState({})\n\n    useEffect(()=>{\n        history.push('/userpage')\n    },[user, history])\n\n    function handleChange(e){\n        setFormState({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        setOpen(false)\n        let confObj = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(formState),\n        }\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users/login`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            // console.log(data)\n            setUser(data)      \n            history.push('/userpage')\n        })\n\n    }\n\n    return (\n        <Modal\n            onClose={() => setOpen(false)}\n            onOpen={() => setOpen(true)}\n            open={open}\n            trigger = {<Button> Log In </Button>}\n        >\n        <Modal.Header>Log In</Modal.Header>\n            <Modal.Content >\n                <div className=\"form \">\n                        <Form onSubmit={(e)=>handleSubmit(e)}>\n                            <Form.Field>\n                                <label>Username</label>\n                                <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                                \n                            </Form.Field>\n                            <Form.Field>\n                                <label>Password</label>\n                                <input placeholder='Password' type=\"password\" />\n                            </Form.Field>\n                            <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Login</Button>\n                        </Form>\n                    </div>\n            </Modal.Content>\n        </Modal>\n        \n    )\n}\n\n","import Search from './Search'\nimport SignUp from './SignUp'\nimport LogIn from './LogIn'\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { Button } from 'semantic-ui-react'\n\nexport default function MainNav ({setBooksFromSearch, setUser, user, startIndex, setStartIndex}){\n\n    let history = useHistory()\n\n    function handleSignOut(){\n        history.push('/home')\n        setUser(null)\n    }\n\n    return(\n\n        <div className=\"main-nav\">\n\n            <ul>\n                <li className=\"logo\">\n                    <NavLink to=\"/\" style={{color:' #333'}}> \n                        <h1 className=\"logo-text\" >bookFun(d)</h1>\n                        {/* <h9 className=\"signed-in\">{user ? `signed in as ${user.username}`: \"not signed in\"} </h9>   */}\n                    </NavLink>\n                </li>\n                <li className= \"search-form\">\n                    <Search \n                    setBooksFromSearch={setBooksFromSearch}\n                    startIndex={startIndex}\n                    setStartIndex={setStartIndex}\n                    />\n                </li>\n                <div className = \"navLinks\">\n                    \n                        {/* {user ? null :<NavLink to=\"/signup\"> SignUp </NavLink> } */}\n                        {user ? null : <SignUp user={user} setUser={setUser}/> }\n                    \n                        \n                            {user ? null : <LogIn style={{color: 'inherit'}} user={user} setUser={setUser}/> }\n                        \n                    \n                        \n                            {user ? <Button> <NavLink style={{color: 'inherit'}} to=\"/userpage\">  My Page  </NavLink></Button> : null}\n                        \n\n                        \n                            {user ? <Button onClick={()=>handleSignOut()}>  Sign Out  </Button> : null}\n                        \n\n                        <Button>\n                            <NavLink style={{color: 'inherit'}} to=\"/\">  Home  </NavLink>\n                        </Button>\n                    \n                </div>\n                \n            </ul>\n        </div>\n    )\n\n}","import {Link} from 'react-router-dom'\nimport { Card, Image } from 'semantic-ui-react'\n\nexport default function BookCard({book}){\n    return(\n        <Card style={{textAlign: 'center'}}>\n            <Image \n                size='tiny' \n                src={ book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail: null }wrapped ui={false} \n            />\n            <Card.Content>\n            <Card.Header>\n                {book.volumeInfo.title ? <Link to={`/bookpage/${book.id}`}>{book.volumeInfo.title.slice(0,50)} </Link> : null}\n            </Card.Header>\n            <Card.Description>\n                {book.volumeInfo.authors ? book.volumeInfo.authors[0].slice(0,50): null}\n            </Card.Description>\n            </Card.Content>\n        </Card>\n        )\n}\n\n","import BookCard from './BookCard'\nimport { Card, Button } from 'semantic-ui-react'\n\nexport default function BookIndex ({booksFromSearch, startIndex, setStartIndex}){\n\n    let booksMapped = []\n\n    if (booksFromSearch){\n         booksMapped = booksFromSearch.map(book=>{\n            return(\n                <BookCard book ={book}/>\n            )\n        })\n    }\n    \n    return (\n        <div className=\"book-index\" style={{marginTop:'100px'}}>\n            <Card.Group itemsPerRow={8}>\n                {booksMapped}  \n            </Card.Group>\n            <div className=\"buttons-combined\" style={{marginTop:'20px'}}>\n                <Button className=\"next-back-button\"  onClick={()=>setStartIndex(startIndex+8)}>Next</Button>\n                {startIndex > 0 ? <Button className=\"next-back-button\" onClick={()=>setStartIndex(startIndex-8)}>Back</Button>: null}\n            </div>     \n        </div>\n    )\n}","import {useState } from \"react\";\n\nexport default function SponsorForm({waitingsMapped, book, user, setUser, waitlistRequest, setWaitlistRequest, setBackEndBook, backEndBook, toggleSponsorForm, setToggleSponsorForm}){\n    \n\n    const[number, setNumber] = useState(0)\n\n\n    function handleSponsorSubmission(e){\n        e.preventDefault()\n\n        let confObj = {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({num_books_funded: e.target.number.value, sponsor_id: user.id })\n        }\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings/sponsor/${book.id}`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            setToggleSponsorForm(!toggleSponsorForm)\n            setWaitlistRequest(!waitlistRequest)\n        })\n   \n\n    }\n\n        return (\n            <form className=\"signup\" onSubmit={e=>handleSponsorSubmission(e)} >\n                <label>Number of copies I'd like to sponsor:</label>\n                    <input type=\"number\" name=\"number\" value={number} onChange={e=>setNumber(e.target.value)}/>\n                    {number > waitingsMapped.length ? (\n                        <p style={{ color: \"red\" }}>Please enter a number smaller than the waitlist total</p>\n                    ) : null}\n                    <input type=\"submit\" value=\"Sponsor\" className=\"button\"/>\n            </form>\n        )\n\n    }\n    ","import {useState } from \"react\";\nimport ReactStars from 'react-stars'\nimport { Button, Form } from 'semantic-ui-react'\n\nexport default function ReviewForm ({user, book, setSavedBooks, setWaitlistRequest, \n    waitlistRequest, waitListRequestAndStoreInDBRequest, backEndBook, setBackEndBook, storeInDB}){\n\n    \n    const [formState, setFormState] = useState({\n        text: \"\",\n        rating: 0\n    })\n\n    function handleChange(e){    \n        if (user){\n            storeInDB()\n            setFormState({\n                user_id: user.id, \n                book_id: book.id,\n                ...formState,\n                [e.target.name] : e.target.value\n            })\n        }\n        else{\n            debugger\n            setFormState({})\n            alert(\"Please sign in to leave a review.\")\n        }\n    }\n\n    function ratingChanged(e){\n         if (user){\n            storeInDB()\n            setFormState({\n                ...formState,\n                rating: e\n            })\n        }\n        else{\n            setFormState({})\n            alert(\"Please sign in to leave a rating.\")\n        }\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        if (formState.text.length < 100){\n            alert(\"Please leave a review with more than 100 characters.\")\n        }\n        if (formState.text.length > 100){\n            let confObj = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(formState),\n                }\n\n            fetch(`${process.env.REACT_APP_API_BASE_URL}/reviews`, confObj)\n            .then(data=>{\n                setWaitlistRequest(!waitlistRequest)\n                setBackEndBook(true)\n                fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n                .then(response=>response.json())\n                .then(data=>{setSavedBooks(data)})\n            })\n            \n        }\n    }\n\n    return (\n    <div>\n        <h3>Leave A Review</h3>\n        <ReactStars\n            className=\"react-stars\"\n            count={5}\n            onChange={ratingChanged}\n            size={20}\n            color2={'#ffd700'} \n            value={formState.rating}\n            name=\"rating\"/>\n            \n        <Form reply onSubmit={e=>handleSubmit(e)}>\n            <Form.TextArea \n                value={formState.text}\n                name=\"text\"             \n                rows={3}\n                cols={25}\n                onChange={e=>handleChange(e)}/>\n            <Button type='submit' content='Add Review' labelPosition='left' icon='edit' primary />\n        </Form>\n        \n    </div> \n    )\n    \n}\n","import { useEffect, useState } from \"react\";\nimport { useParams, Link,  } from \"react-router-dom\";\nimport SponsorForm from './SponsorForm'\nimport ReviewForm from './ReviewForm'\nimport BookCard from '../BookIndex/BookCard'\nimport { Card, Button, Image } from 'semantic-ui-react'\nimport ReactStars from 'react-stars'\n\nexport default function BookPage({setSavedBooks, savedBooks, user, setUser, reviewLeft}){\n \n    const [book, setBook] = useState ({})\n    const [backEndBook, setBackEndBook] = useState(false)\n    const [waitlistRequest, setWaitlistRequest] = useState(false)\n    const [toggleSponsorForm, setToggleSponsorForm] = useState(false)\n    const [booksFromSearch, setBooksFromSearch] = useState([])\n    const params = useParams()\n    const [bookId, setBookId] = useState(0)\n    const[similarIndex, setSimilarIndex] = useState(0)\n    const [users, setUsers] = useState([])\n\n    let waitingsMapped = null\n    let waitingsFulfilledMapped = 0\n    let reviewsMapped = null\n    let booksMapped = []\n    let averageRating = 0\n    let sponsorsMapped=[]\n\n    function stripHtml(html){\n        let tmp = document.createElement(\"DIV\");\n        tmp.innerHTML = html;\n        return tmp.textContent || tmp.innerText || \"\";\n    }\n\n    useEffect(()=>{\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n        .then(response=>response.json())\n        .then(data=>{\n            let foundBook = null\n            foundBook = data.find(book => book.api_id === params.id)\n            setBook(foundBook)\n\n            if (foundBook){\n                setBookId (foundBook.id)\n                setBackEndBook(true)\n            }\n            if (!foundBook){\n                fetch(`https://www.googleapis.com/books/v1/volumes/${params.id}`)\n                .then(response => response.json())\n                .then(data=>{\n                    let title = \"\"\n                    let subtitle = \"\"\n                    let authors = [\"\"]\n                    let publisher = \"\"\n                    let publishedDate = \"\"\n                    let description = \"\"\n                    let image_url = \"\"\n                    if (data.volumeInfo.title){\n                        title = data.volumeInfo.title\n                    }\n                    if (data.volumeInfo.authors){\n                        authors = data.volumeInfo.authors\n                    }\n                    if (data.volumeInfo.subtitle){\n                        subtitle = data.volumeInfo.subtitle\n                    }\n                    if (data.volumeInfo.publisher){\n                        publisher = data.volumeInfo.publisher\n                    }\n                    if (data.volumeInfo.publishedDate){\n                        publishedDate = data.volumeInfo.publishedDate\n                    }\n                    if (data.volumeInfo.description){\n                        description = data.volumeInfo.description\n                    }\n                    if (data.volumeInfo.imageLinks){\n                        image_url = data.volumeInfo.imageLinks.thumbnail\n                    }\n                    setBook({\n                        title: title, \n                        subtitle: subtitle, \n                        authors: authors.join(\", \"), \n                        publisher: publisher, \n                        publishedDate: publishedDate, \n                        description: stripHtml(description),\n                        image_url: image_url, \n                        api_id: data.id, \n                        waitings: [],\n                        reviews: []\n                    })\n                })\n            }\n        })\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users`)\n        .then(response=>response.json())\n        .then(data=>setUsers(data))\n\n    },[waitlistRequest, backEndBook, params.id, bookId])\n\n    useEffect(()=>{\n        if (book){\n            if (book.title){\n                let searchTerms = book.title.split(\" \").pop()\n                fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerms}&maxResults=20`)\n                .then(response=>response.json())\n                .then(data=>{\n                    setBooksFromSearch(data.items)\n                })\n            }\n        }\n    },[book])\n\n    function storeInDB(){\n        if (user){\n            let confObj = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(book),\n            }\n            fetch(`${process.env.REACT_APP_API_BASE_URL}/books`, confObj)\n            .then(response=>response.json())\n            .then(data=>{\n                setBook(data)\n                setBookId(data.id)\n                setBackEndBook(true)\n                setWaitlistRequest(!waitlistRequest)\n            })\n        }\n        else{\n            alert('Please sign in to leave a review.')\n        }\n    }\n\n\n   \n\n    function waitListRequestAndStoreInDBRequest (){\n        if (user){\n            let confObj = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(book),\n            }\n            fetch(`${process.env.REACT_APP_API_BASE_URL}/books`, confObj)\n            .then(response=>response.json())\n            .then(data=>{\n                setBook(data)\n                setBookId(data.id)\n                let bookIdea = data.id\n                let confObj = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({user_id: user.id, book_id: bookIdea, fulfilled: false}),\n                }\n                fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`, confObj)\n                .then(response=>response.json())\n                .then(data=>{                  \n                    setBackEndBook(true)\n                    setWaitlistRequest(!waitlistRequest)\n                    if (data.error){\n                        alert(`${data.error}`)\n                    }\n                    // else{\n                    //     fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n                    //     .then(response=>response.json())\n                    //     .then(data=>setSavedBooks(data))\n                    // }\n                })\n            })\n        }\n\n        else{\n            alert('Please sign in to join a waitlist.')\n        }\n    }\n\n    if (booksFromSearch.length > 0){\n         booksMapped = booksFromSearch.slice(similarIndex, similarIndex+3).map(book=>{\n            return(\n                <BookCard book = {book}/>\n            )\n        })\n    }\n   \n    \n\n    if (backEndBook === true && book){\n         if (users.length > 0){\n            let sponsorsFiltered = book.waitings.filter(waiting=>waiting.fulfilled===true)\n            let arr = []\n            sponsorsMapped = sponsorsFiltered.map(waiting=>{\n                let x = sponsorsFiltered.filter(wait=>wait.sponsor_id===waiting.sponsor_id).length\n\n                if (arr.find(elem=>elem===waiting.sponsor_id)){\n                    return null\n                }\n                else{\n                arr.push(waiting.sponsor_id)\n                    return(\n                    <li>\n                        <Image src={users.find(user=>user.id===waiting.sponsor_id).profile_pic  ? users.find(user=>user.id===waiting.sponsor_id).profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                        <Link to={`/otheruserpage/${waiting.sponsor_id}`}>\n                            {users.find(user=>user.id===waiting.sponsor_id).username} \n                        </Link>\n                        <div style={{float: 'right'}}> {x} {x === 1 ? \" copy\" : \"copies\"}</div>\n                    </li>)\n                }\n            })\n            sponsorsMapped = sponsorsMapped.filter(waiting=>waiting!==null)\n        }\n         \n        waitingsMapped = book.waitings.filter(waiting => waiting.fulfilled !== true).map(waiting=>{\n            return(\n            <li>\n                <Image src={waiting.user.profile_pic ? waiting.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                <Link to={`/otheruserpage/${waiting.user.id}`}>\n                    {waiting.user.username} {waiting.user.eligible? \"(eligible)\": \"(ineligible)\"}\n                </Link>\n            </li>)\n        })\n        \n       \n        \n        waitingsFulfilledMapped = book.waitings.filter(waiting => waiting.fulfilled === true).map(waiting=>{\n            return(\n            <li>\n                <Image src={waiting.user.profile_pic ? waiting.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                <Link to={`/otheruserpage/${waiting.user.id}`}>{waiting.user.username}</Link>\n            </li>)\n        })\n\n        reviewsMapped = book.reviews.map(review=>{  \n            \n            if (user){\n                let reducer = (accumulator, currentValue) => accumulator + currentValue;\n                averageRating = book.reviews.map(review=>review.rating).reduce(reducer)/book.reviews.length\n                return(\n                    <div className=\"review\">\n                        <Image src={review.user.profile_pic ? review.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini'  circular/>\n                        <Link to={`/otheruserpage/${review.user.id}`}>{review.user.username}</Link> \n                        <ReactStars\n                            className=\"react-stars\"\n                            count={5}\n                            value={review.rating}\n                            size={15}\n                            color2={'#ffd700'}\n                            edit={false}\n                            // style={{fontSize: '20px'}}\n                        />\n                        {review.text} \n                        {review.user.id === user.id ? <Button size='mini' id={review.id} onClick={e=>handleCommentDelete(e)}>Delete</Button> :null}\n                    </div>\n                )   \n            }\n            else{\n                let reducer = (accumulator, currentValue) => accumulator + currentValue;\n                averageRating = book.reviews.map(review=>review.rating).reduce(reducer)/book.reviews.length\n                return(\n                    <li>\n                        <div>\n                            <Image src={review.user.profile_pic ? review.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                            <Link to={`/otheruserpage/${review.user.id}`}>{review.user.username}</Link> \n                            <ReactStars\n                                className=\"react-stars\"\n                                count={5}\n                                value={review.rating}\n                                size={15}\n                                color2={'#ffd700'}\n                                edit={false}\n                            />\n                        </div>\n                        {review.text} \n                    </li>\n                )   \n            }\n        })\n    }\n\n    function handleCommentDelete(e){\n        let reviewId = parseInt(e.target.id)\n        let confObj = {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json',\n            }\n        }\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/reviews/${reviewId}`, confObj)\n        .then(data=>setWaitlistRequest(!waitlistRequest))\n\n    }\n\n    function handleToggleRequest(){\n        if (user){\n            if (backEndBook){\n                setToggleSponsorForm(!toggleSponsorForm)\n            }\n            else{\n                alert(\"There is no one on the waitlist.\")\n            }\n        }\n        else{\n        alert(\"Please log in to Sponsor\")\n        }\n    }\n\n    function similarNext(){\n        if (similarIndex < booksFromSearch.length - 2){\n            setSimilarIndex(similarIndex+3)\n        }\n        else{\n            alert('No More Books to Display')\n        }\n    }\n\n    function similarBack(){\n        setSimilarIndex(similarIndex-3)\n    }\n\n    return(\n        <div className=\"bookpage\">\n            <div className=\"book-info\">\n                <div className=\"book-info-image\">\n                    <Image style={{margin: '40px', float:'right'}}size='small-medium'src={ book ? book.image_url: \"N/A\" }/>\n                </div>\n                <div className=\"book-info-info\">\n                    <h2 style={{marginBottom: '-15px'}}>{book? book.title: \"N/A\"}</h2>\n                    <h3>{book? book.subtitle: \"N/A\"}</h3>\n                    {reviewsMapped ? \n                        <ReactStars\n                            className=\"react-stars\"\n                            count={5}\n                            value={averageRating}\n                            size={20}\n                            color2={'#ffd700'}\n                            edit={false}\n                        />\n                    : null}\n                \n                        <b>by:</b> {book? book.authors: \"N/A\"} ({book? book.publishedDate: \"N/A\"})\n                    \n                        <br></br>\n                        <b>Publishing House:</b> {book? book.publisher: \"N/A\"}\n                        <br></br>\n                        \n                        <b>Description:</b> \n                        <p>\n                            {book? book.description: \"N/A\"} \n                        </p>\n                </div>\n\n\n            </div>\n            \n\n            { book ? \n            <>\n                <div className=\"reviews\">\n                    <h3>Reviews</h3>\n                    {backEndBook && reviewsMapped.length > 0 ? \n                        <ul className=\"reviewsUl\"> {reviewsMapped} </ul> \n                    : \"No one has reviewed this book yet. Be the first!\"} \n                    <ReviewForm \n                    storeInDB={storeInDB}\n                    user={user} \n                    book={book} \n                    waitlistRequest={waitlistRequest} \n                    setWaitlistRequest={setWaitlistRequest}\n                    backEndBook={backEndBook}\n                    setBackEndBook={setBackEndBook}\n                    setSavedBooks={setSavedBooks}\n                    waitListRequestAndStoreInDBRequest={waitListRequestAndStoreInDBRequest}\n                    toggleSponsorForm={toggleSponsorForm} \n                    setToggleSponsorForm={setToggleSponsorForm}/>\n                </div>\n\n                <div className=\"bookpage-recipients-list\">\n                    <h3  style={{textAlign: 'center'}}>Recipients</h3>\n                    {backEndBook && waitingsFulfilledMapped.length > 0 ? <ol> {waitingsFulfilledMapped}  </ol>: \"No one has received this book yet. Join the waitlist to be the first!\"}\n                        \n                </div>\n                <div className= \"bookpage-waiting-list\">\n                    <h3 style={{textAlign: 'center'}}>Waitlist</h3>\n                    <ol>{ backEndBook && waitingsMapped.length > 0 ? waitingsMapped: \"No one is currently waiting for this book. Be the first!\"} </ol>\n                    <Button className=\"waiting-button\" onClick={waitListRequestAndStoreInDBRequest}>Join the Waitlist</Button>\n\n                </div>\n                <div className= \"bookpage-sponsor-list\">\n                    <h3 style={{textAlign: 'center'}}>Sponsors</h3>\n                    <ol>{ backEndBook && sponsorsMapped.length > 0 ? sponsorsMapped: \"No one has sponsored this book yet.  Be the first!\"} </ol>\n                    <Button onClick={handleToggleRequest}> Sponsor this Book</Button>\n                        {toggleSponsorForm ? \n                            <SponsorForm \n                                waitingsMapped={waitingsMapped} \n                                book={book} \n                                user={user}\n                                setUser={setUser}\n                                waitlistRequest={waitlistRequest}\n                                setWaitlistRequest={setWaitlistRequest}\n                                setBackEndBook={setBackEndBook}\n                                backEndBook={backEndBook}\n                                setToggleSponsorForm={setToggleSponsorForm}\n                                toggleSponsorForm={ toggleSponsorForm}\n                            /> \n                        : null}\n                </div>\n                </>\n            : null\n            }\n            <div className = \"similar-books\">\n                <h3>Similar Books</h3>\n                {booksFromSearch.length > 0 ? \n                    <Card.Group itemsPerRow={3}>\n                        {booksMapped}  \n                    </Card.Group>\n                : null}\n                \n                <div className=\"buttons-combined\">\n                    <Button className=\"next-back-button\" onClick={()=>similarNext(similarIndex+3)}>See More</Button>\n                    {similarIndex > 0 ? <Button className=\"next-back-button\" onClick={()=>similarBack(similarIndex+3)}>Go Back</Button>: null}\n                </div>\n            </div>\n            \n        </div>\n    )\n\n}\n\n\n\n\n\n\n\n\n\n\n","import { Link } from 'react-router-dom'\nimport { Card, Image } from 'semantic-ui-react'\n\nexport default function BackendBookCard({book, style}){\n    if (book){\n        return(\n            <Card style={{textAlign: 'center', style}}>\n                <Image size=\"small\" src={ book.image_url ? book.image_url: null }wrapped ui={false} />\n                <Card.Content>\n                <Card.Header>\n                    {book.title ? <Link to={`/bookpage/${book.api_id}`}>{book.title.slice(0,50)} </Link>:null}\n                </Card.Header>\n                <Card.Meta>\n                    {book.subtitle? book.subtitle.slice(0,50): null}\n                </Card.Meta>\n                <Card.Description>\n                    <span className='date'>{book.authors ? book.authors: null}</span>\n                </Card.Description>\n                </Card.Content>\n            </Card>\n        )\n    }\n    else{\n        return (null)\n    }\n    \n}","import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport { Card, Button, Image, Icon} from 'semantic-ui-react'\n\nexport default function Home(){\n\n    const[books,setBooks] = useState([])\n    const[backEndWaitings, setBackEndWaitings] = useState([])\n    const[users, setUsers] = useState([])\n    const[index, setIndex] = useState(0)\n\n    let waitings = []\n    let waitingsMapped = []\n    let sponsorsMapped = []\n    let topReaders = []\n    let topReadersMapped = []\n    // console.log(process.env.REACT_APP_API_BASE_URL)\n    useEffect(()=>{\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n        .then(response=>response.json())\n        .then(data=>{setBooks(data)})\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users`)\n        .then(response=>response.json())\n        .then(data=>{setUsers(data)})\n        \n        fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n        .then(response=>response.json())\n        .then(data=>{setBackEndWaitings(data)})\n    },[])\n\n     if (books.length > 0){\n        for(let i=0; i< books.length; i++){\n            let waitingsFulFilled = books[i].waitings.filter(waitings=>waitings.fulfilled!==false).length\n            waitings.push({[waitingsFulFilled]:books[i]})\n        }\n        waitings.sort(function (a, b){\n            return Object.keys(b)[0] - Object.keys(a)[0]\n        })\n        waitingsMapped = waitings.slice(index, (index+8)).map(waiting=>{\n            return (<BackEndBookCard book = {Object.values(waiting)[0]}/>)\n        })\n    }\n\n    if (backEndWaitings.length > 0){ \n        let sponsoredWaitings = backEndWaitings.filter(waiting=>waiting.fulfilled===true)\n        let sponsorAOH=[]\n        for (let i=0;i<users.length;i++){\n            let userSponsors = sponsoredWaitings.filter(waiting=>waiting.sponsor_id===users[i].id)\n            sponsorAOH.push({[userSponsors.length]:users[i]})\n        }\n        let x = sponsorAOH.sort(function (a, b){\n            return Object.keys(b)[0] - Object.keys(a)[0]\n        })\n        sponsorsMapped = x.slice(0,3).map(sponsor=>{\n            return( \n                    <Card>\n                        <Card.Header><Link to={`/otheruserpage/${Object.values(sponsor)[0].id}`} > <h4 style={{textAlign:'center'}}>{Object.values(sponsor)[0].username}</h4> </Link></Card.Header>\n                            <Card.Content style={{textAlign:'center'}}>\n                                <Image style={{margin:'auto'}} src={Object.values(sponsor)[0].profile_pic? Object.values(sponsor)[0].profile_pic: \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='small' circular />\n                            </Card.Content>\n                            <Card.Content extra>\n                            <Icon name='user' />\n                                {Object.keys(sponsor)[0]} sponsors\n                            </Card.Content>\n                    </Card>\n\n                    \n                    \n                \n\n                )\n        })\n    }\n    if (users.length > 0){\n       topReaders = users.sort(function (a, b){\n            return   (b.waitings.filter(waiting=>waiting.fulfilled===true).length) - (a.waitings.filter(waiting=>waiting.fulfilled===true).length) \n        })  \n        topReadersMapped = topReaders.slice(0,3).map(reader=>{\n            return( \n                    <Card>\n                        <Card.Header><Link to={`/otheruserpage/${reader.id}`}> <h4 style={{textAlign:'center'}}>{reader.username} </h4></Link></Card.Header>\n                        <Card.Content style={{textAlign:'center'}}>\n                            <Image src={reader.profile_pic ? reader.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='small' circular />\n                        </Card.Content>\n                            <Card.Content extra>\n                            <Icon name='book' />\n                             {reader.waitings.filter(waiting=>waiting.fulfilled===true).length } Books Read\n                        </Card.Content>\n                    </Card>\n                )\n        })\n        \n    }\n    \n    return(\n        <>\n            <div className=\"home-info\">\n                <h2 className=\"who\">\n                    Who we are\n                    \n                </h2>\n                <p style={{fontSize: '15px'}}>\n                    If you've ever read an impactful book that you'd like to share with others, BookFund is the place for you!\n                    <br></br>\n                    BookFund is a simple way for users to sponsor books they love and share the knowledge with others. \n                    <br></br>\n                    Users can sign up for a book via a waitlist to receive the next sponsored copy of that book. After receiving a book, users must publish a review of the book on the site, as well as enter a two week wait period before they are eligible to receive their next book.\n                </p>\n            </div>\n\n                <h2 className=\"pop\" >Popular Now</h2>\n            <div className=\"popular-now\">\n                {waitingsMapped.length >0 ? \n                <Card.Group itemsPerRow={8}>\n                    {waitingsMapped}  \n                </Card.Group>\n                :null} \n\n            </div>\n                <div className=\"buttons-combined\">\n                    <Button className=\"next-back-button\"  onClick={()=>setIndex(index+8)}>Next</Button>\n                    {index > 0 ? <Button className=\"next-back-button\" onClick={()=>setIndex(index-8)}>Back</Button>: null}\n                </div>\n            <div style={{display:'flex',marginTop: '50px'}}className=\"bottom-home\">\n                 <div className=\"top-readers-home\">\n\n                    <h4>Top Readers:</h4>\n                    <Card.Group itemsPerRow={3}>\n                        {topReadersMapped.length>0 ? topReadersMapped :null}\n                    </Card.Group>\n                </div>\n\n                <div className=\"top-sponsors-home\">\n                    <h4>Top Sponsors:</h4>\n                    <Card.Group itemsPerRow={3}>\n                        {sponsorsMapped.length>0 ? sponsorsMapped :null}\n                    </Card.Group>\n                </div>                                                \n            </div>\n        </>\n    )\n}","import React, {useState, useRef, useEffect} from 'react'\n\n \nconst Timer = ({mostRecent, timeLeft, setTimeLeft, displayTimer, setDisplayTimerTwo, reviewLeft })=>{\n    // console.log('timer')\n    // console.log('reviewleft:', reviewLeft)\n    // console.log('timeleft:', timeLeft)\n    // console.log('mostRecent!== null:', (mostRecent!== null))\n\n    const [timerDays, setTimerDays] = useState(0)\n    const [timerHours, setTimerHours] = useState(0)\n    const [timerMinutes, setTimerMinutes] = useState(0)\n    const [timerSeconds, setTimerSeconds] = useState(0)\n\n\n    let interval = useRef()\n\n    const startTimer = () => {\n\n        // const countDownDate = new Date(parseInt(mostRecent.sponsor_date)+1209600000)\n        const countDownDate = new Date(parseInt(mostRecent.sponsor_date)+60000)\n\n   \n        interval = setInterval(()=>{\n            const now = new Date().getTime()\n            const timeRemaining = countDownDate - now\n\n            const days = Math.floor(timeRemaining / (1000 * 60 * 60 *24))\n            const hours = Math.floor((timeRemaining % (1000 * 60 * 60 *24) / (1000*60*60)))\n            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60) / (1000 * 60)))\n            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000)\n            \n            if (timeRemaining < 0){\n                // debugger\n                setTimeLeft(false)\n                clearInterval(interval.current)\n                displayTimer = false\n                setDisplayTimerTwo(false)\n            }\n            else{\n                //update timer\n                setTimerDays(days)\n                setTimerHours(hours)\n                setTimerMinutes(minutes)\n                setTimerSeconds(seconds)\n            }\n\n        }, 1000)\n    }\n\n    useEffect(()=>{\n        let current = interval.current\n        startTimer()\n        return()=>{\n            clearInterval(current)\n        }\n    })\n    \n    return (\n        \n\n        <div class=\"container\">\n            <h1 id=\"headline\">Countdown until your next book:</h1>\n                <div id=\"countdown\">\n                    <ul>\n                        <li><span id=\"numbers\">{timerDays}</span>days</li>\n                        <li><span id=\"numbers\">{timerHours}</span>Hours</li>\n                        <li><span id=\"numbers\">{timerMinutes}</span>Minutes</li>\n                        <li><span id=\"numbers\">{timerSeconds} </span>Seconds</li>\n                    </ul>\n                </div>\n          </div>\n         \n    )\n}\n\nexport default Timer\n\n\n\n ","import { Card, Button } from 'semantic-ui-react'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport React, { useState } from \"react\"\n\nexport default function SponsorList({allWaitings, user, savedBooks}){\n    \n    let sponsoredWaitings = []\n    let sponsoredMapped = []\n\n    const [sponsoredIndex, setSponsoredIndex] = useState(0)\n\n    if (allWaitings.length > 0){\n        sponsoredWaitings = allWaitings.filter(waiting=>waiting.sponsor_id === user.id)\n        if (sponsoredWaitings.length > 0){\n            let arrTwo = []\n            arrTwo.push(sponsoredWaitings[0])\n            for (let i=1;i < sponsoredWaitings.length;i++){\n                if (arrTwo.find(elem=>elem.book_id===sponsoredWaitings[i].book_id))\n                {\n                    \n                }\n                else{\n                    arrTwo.push(sponsoredWaitings[i])\n                }\n            }\n            sponsoredMapped = arrTwo.map(waiting=>{ //create JSX of books\n                return (<BackEndBookCard book={savedBooks.find(savedBook => savedBook.id === waiting.book_id)}/>)\n            })\n            console.log(sponsoredMapped)\n        }\n    }    \n    return (\n            <>\n                <div className=\"userpage-book-display\">\n                    <Card.Group itemsPerRow={8}>\n                        {sponsoredMapped.slice(sponsoredIndex, sponsoredIndex+8)}  \n                    </Card.Group>\n                </div>\n\n                <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex+8)}>Next</Button>\n                {sponsoredIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex-8)}>Back</Button> : null}\n            </>\n            )\n}","import React, { useState } from \"react\"\nimport { Card, Button } from 'semantic-ui-react'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\n\nexport default function WaitList({waitlistMapped, user, savedBooks}){\n    const [waitlistIndex, setWaitlistIndex] = useState(0)\n\n    let waitingsMapped = []\n\n     //get all unfulfilled waitings for a user\n    let waitingsUnfulfilled = user.waitings.filter(waiting=>waiting.fulfilled!==true)\n    for(let i=0;i<waitingsUnfulfilled.length;i++){\n        waitingsMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsUnfulfilled[i].book_id))\n    } \n    if (waitingsMapped.length > 0){\n        waitlistMapped = waitingsMapped.map(waiting=>{ //create JSX of books\n            return (<BackEndBookCard book={waiting}/>)\n        })\n    }       \n\n    function handleNextClick(){\n        if (waitlistIndex < waitlistMapped.length){\n            if (waitlistMapped.length - waitlistIndex > 8){\n                setWaitlistIndex(waitlistIndex+8)\n            }\n            else{\n            setWaitlistIndex(0)\n            }\n        }\n    }\n    if (waitingsMapped.length > 0 ){\n        return(\n        <>\n            <div className=\"userpage-book-display\">\n                <Card.Group itemsPerRow={8}>\n                    {waitlistMapped.slice(waitlistIndex, waitlistIndex+8)}  \n                </Card.Group>\n            </div>\n            <Button className=\"next-back-button\"  onClick={handleNextClick}>Next</Button>\n            {waitlistIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setWaitlistIndex(waitlistIndex-8)}>Back</Button>: null}\n        </>\n        ) \n    }    \n    else{\n        return null\n    }\n    \n}","import { Card, Button } from 'semantic-ui-react'\nimport React, { useState } from \"react\"\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\n\n\n\nexport default function ReceivedList({savedBooks, waitingsFulFilledMapped, waitlistMapped}){\n\n    const [index, setIndex] = useState(0)\n    let receivedMapped = null\n\n     if (savedBooks.length > 0){\n        receivedMapped = waitingsFulFilledMapped.map(waiting=>{ //create JSX of books\n            return (<BackEndBookCard book={waiting}/>)\n        })\n    }\n\n    function handleNextClick(){\n        if (index < waitlistMapped.length){\n            if (waitlistMapped.length - index > 8){\n                setIndex(index+8)\n            }\n            else{\n            setIndex(0)\n            }\n        }\n    }\n\n\n    return (\n        <>\n            <div className=\"userpage-book-display\">\n                <Card.Group itemsPerRow={8}>\n                    {receivedMapped.slice(index, index+8)}  \n                </Card.Group>\n            </div>\n            <Button className=\"next-back-button\"  onClick={()=>handleNextClick(index+8)}>Next</Button>\n            {index > 0 ? <Button className=\"next-back-button\"  onClick={()=>setIndex(index-8)}>Back</Button>: null}\n        </>\n    )\n}","import { Button } from 'semantic-ui-react'\nimport React, { useState, useEffect } from \"react\"\nimport { Redirect } from \"react-router-dom\";\nimport Timer from './Timer'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport { Image, Form } from 'semantic-ui-react'\nimport SponsorList from './SponsorList'\nimport WaitList from \"./WaitList\";\nimport ReceivedList from './ReceivedList'\n\nexport default function UserPage({user, savedBooks, timeLeft, setTimeLeft, reviewLeft, setReviewLeft}){\n\n    let waitingsFulFilledMapped = []\n    let mostRecent = {}\n    let foundBook = null\n    let foundReview = null\n    let waitlistMapped = 0\n    let displayTimer = false\n    \n    const [allWaitings, setAllWaitings] = useState([])\n    const [displayTimerTwo, setDisplayTimerTwo] = useState(true)\n    const [editInfo] = useState(false)\n    const [formState, setFormState] = useState({})\n\n    \n    useEffect(()=>{\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n    .then(response=>response.json())\n    .then(data=>setAllWaitings(data))\n    },[])\n\n    function handleChange(e){\n        console.log(e)\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.value\n        })   \n    }\n\n    function handleImage (e){\n        e.persist()\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.files[0]\n        })\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const form = new FormData()\n\n        if (!(formState.username)){\n            alert('Please enter a username.')\n        }\n\n        form.append(\"profile_pic\", formState.profile_pic)\n        form.append(\"username\", formState.username)\n        form.append(\"name\", formState.name)\n        form.append(\"bio\", formState.bio)\n        form.append(\"email\", formState.email)\n    \n    }\n    \n    if (user){ \n        if (user.waitings.length < 1){\n            // console.log(`setTimeLeft(false)`)\n            setTimeLeft(false)\n            setReviewLeft(true)\n        }\n\n        let waitingsFulfilled = user.waitings.filter(waiting=>waiting.fulfilled===true) //get all fulfilled waitings for a user\n        for(let i = 0;i < waitingsFulfilled.length; i++){\n            waitingsFulFilledMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsFulfilled[i].book_id)) //create an array of those books by comparing to saved books\n        } \n        \n        if (waitingsFulfilled.length < 1){\n             setReviewLeft(true)\n        }\n        \n        if (waitingsFulfilled.length > 0){\n            mostRecent = (waitingsFulfilled.sort(function (a, b){ // find most recent received\n                return b.id - a.id\n            })[0])\n            if (Object.keys(mostRecent).length !== 0){ // if theres not most recent book\n                //check mostRecent.waiting date. if no time left between creation and future deadline, setTimeLeft(false), and vice versa\n                let creationDate = new Date(parseInt(mostRecent.sponsor_date)+60000).getTime()\n                let now = new Date().getTime()\n\n                if (now < creationDate){ // wait period has not passed\n                    displayTimer = true\n                }\n                else\n                {\n                    displayTimer = false\n                    console.log(`setTimeLeft(false)`)\n                    setTimeLeft(false)\n                }\n\n            }\n                foundBook = savedBooks.find(book=>book.id===mostRecent.book_id) // find most recently received book based on most recent waiting\n                if (foundBook){\n                    foundReview = foundBook.reviews.find(review=>review.user.id===user.id) // check if they left a review on it\n                    if (foundReview){\n                        setReviewLeft(true)\n                    }\n                    else{\n                        setReviewLeft(false) //if book was found without a review\n                    }\n                    \n                }\n                else{ // if no book is on received list\n                    setReviewLeft(true)\n                }\n        }\n         \n\n    }\n    if (user){\n\n        return(\n        <div className=\"userpage\"> \n\n        <div className=\"userpage-top-half\">\n\n             <div className=\"userpage-eligibility-info\" style={{float:'left'}}>\n                { displayTimer && displayTimerTwo ?\n                <Timer \n                    mostRecent={mostRecent}\n                    timeLeft={timeLeft} \n                    setTimeLeft={setTimeLeft}\n                    displayTimer={displayTimer}\n                    setDisplayTimerTwo={setDisplayTimerTwo}\n                    reviewLeft={reviewLeft}\n                />\n            : null}\n                {displayTimer === false && reviewLeft === true ? <h3>Looks like you're eligible for your next book!</h3> : null}\n                {reviewLeft === false && mostRecent!== null && (user.waitings.length > 0) ? (<div style={{margin:'auto'}} > <h3 >Please leave a review for</h3> <div style={{margin:'auto'}}><BackEndBookCard book={foundBook} style={{margin:'auto'}}/></div> </div>): null}\n            </div>\n            <div className=\"userpage-user-info\"  >\n                <h3>Profile</h3>\n                <Image src={user.profile_pic ? user.profile_pic : null} size=\"small\" circular style={{float:'left'}}/>\n                    {editInfo ? null :\n                    <div style={{float:'left', marginLeft: '50px'}}>\n                        <h4 style={{display:'inline'}}>Name: </h4>{user.name !== \"undefined\"? user.name : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Email: </h4>{user.email !== \"undefined\" ?  user.email : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Username: </h4>{user.username !== \"undefined\" ? user.username : null }\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Bio: </h4>{user.bio !== \"undefined\" ? user.bio : null}\n                    </div>\n                }\n\n                {editInfo ? \n                <div style={{float:'left', marginLeft: '50px'}}>\n                     <Form onSubmit={(e)=>handleSubmit(e)}>\n                        <Form.Field>\n                            <label>Name</label>\n                            <input placeholder='Name' name=\"name\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Username</label>\n                            <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Email</label>\n                            <input placeholder='Email' name=\"email\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Password</label>\n                            <input placeholder='Password' type=\"password\" />\n                        </Form.Field>\n                        <Form.Field >\n                            <label>Bio</label>\n                            <input placeholder='Bio' name=\"bio\" onChange={(e)=>handleChange(e)}/>\n                        </Form.Field>\n                        <Form.Input \n                        type=\"file\" \n                        name=\"profile_pic\" \n                        fluid label='Image Upload' \n                        onChange={(e)=>handleImage(e)} \n                        />\n                    <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Sign Up</Button>\n                    </Form>   \n                </div>\n                    \n                : null}\n\n                {/* <Button style={{float:'right', marginRight: '50px'}} onClick={()=>setEditInfo(!editInfo)}> Edit Profile Info </Button> */}\n            \n            </div>\n\n                \n\n\n\n\n\n                    \n        \n        \n        </div>\n                <h3 className=\"pop\">Waitlist</h3>\n        \n                <WaitList\n                waitlistMapped={waitlistMapped}\n                user={user}\n                savedBooks={savedBooks}/>\n\n\n                <h3 className=\"pop\">Received</h3>\n                {waitingsFulFilledMapped.length > 0 ? \n                    <ReceivedList\n                    waitingsFulFilledMapped={waitingsFulFilledMapped}\n                    savedBooks={savedBooks}\n                    waitlistMapped={waitlistMapped}/>\n                :null}\n\n\n                <h3 className=\"pop\">Sponsored</h3>\n                <SponsorList\n                allWaitings={allWaitings}\n                savedBooks={savedBooks}\n                user={user}/>\n            </div>\n        )\n\n    }\n    else{\n        return <>\n        Error. Please try again\n            <Redirect to =\"/bookindex\"/>\n        </>\n    }\n}\n\n\n","import React, { useEffect, useState } from \"react\"\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport {  useParams } from \"react-router-dom\";\nimport { Card, Button, Image } from 'semantic-ui-react'\n\n\n\nexport default function OtherUserPage({savedBooks, timeLeft, setTimeLeft, reviewLeft, setReviewLeft}){\n\n    let waitingsMapped = []\n    let waitingsFulFilledMapped = []\n    let mostRecent = {}\n    let foundBook = null\n    let foundReview = null\n    let receivedMapped = null\n    let waitlistMapped = null\n    let sponsoredWaitings = []\n    let sponsoredMapped = []\n    \n    const [allWaitings, setAllWaitings] = useState([])\n    const [index, setIndex] = useState(0)\n    const [waitlistIndex, setWaitlistIndex] = useState(0)\n    const [sponsoredIndex, setSponsoredIndex] = useState(0)\n    const [user, setUser] = useState(null)\n    const params = useParams()\n\n    useEffect(()=>{\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${params.id}`)\n        .then(response => response.json())\n        .then(data=>setUser(data))  \n    },[params.id])\n    \n\n    useEffect(()=>{\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n    .then(response=>response.json())\n    .then(data=> setAllWaitings(data))\n    },[])\n    \n    if (user){ \n        if (user.waitings.length < 1){\n            console.log(`setTimeLeft(false)`)\n             setTimeLeft(false)\n             setReviewLeft(true)\n        }\n\n        let waitingsUnfulfilled = user.waitings.filter(waiting=>waiting.fulfilled!==true)//get all unfulfilled waitings for a user\n        for(let i=0;i<waitingsUnfulfilled.length;i++){\n            waitingsMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsUnfulfilled[i].book_id))//create an array of those books by comparing to saved books\n        } \n        if (waitingsMapped.length > 0){\n            waitlistMapped = waitingsMapped.map(waiting=>{ //create JSX of books\n                return (<BackEndBookCard book={waiting}/>)\n            })\n        }\n        if (allWaitings.length > 0){\n            sponsoredWaitings = allWaitings.filter(waiting=>waiting.sponsor_id === user.id)\n\n            \n            if (sponsoredWaitings.length > 0){\n                let arrTwo = []\n                arrTwo.push(sponsoredWaitings[0])\n                for (let i=1;i < sponsoredWaitings.length;i++){\n                    if (arrTwo.find(elem=>elem.book_id===sponsoredWaitings[i].book_id))\n                    {\n                        \n                    }\n                    else{\n                        arrTwo.push(sponsoredWaitings[i])\n                    }\n                    \n                }\n\n                sponsoredMapped = arrTwo.map(waiting=>{ //create JSX of books\n                    return (<BackEndBookCard book={savedBooks.find(savedBook => savedBook.id === waiting.book_id)}/>)\n                })\n            }\n            }        \n\n\n        let waitingsFulfilled = user.waitings.filter(waiting=>waiting.fulfilled===true) //get all fulfilled waitings for a user\n        for(let i=0;i<waitingsFulfilled.length;i++){\n            waitingsFulFilledMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsFulfilled[i].book_id)) //create an array of those books by comparing to saved books\n        } \n        \n        if (waitingsFulfilled.length < 1){\n             setReviewLeft(true)\n         }\n\n\n\n        if (savedBooks.length > 0){\n            receivedMapped = waitingsFulFilledMapped.map(waiting=>{ //create JSX of books\n                return (<BackEndBookCard book={waiting}/>)\n            })\n        }\n        \n        \n        if (waitingsFulfilled.length > 0){\n            mostRecent = (waitingsFulfilled.sort(function (a, b){ // find most recent received\n                return b.id - a.id\n            })[0])\n            if (Object.keys(mostRecent).length !== 0){ // if theres not most recent book\n                \n                //check mostRecent.waiting date. if no time left between creation and future deadline, setTimeLeft(false), and vice versa\n                let creationDate = new Date(parseInt(mostRecent.sponsor_date)+60000).getTime()\n                let now = new Date().getTime()\n\n                if (now < creationDate){ // wait period has not passed\n                }\n                else\n                {\n\n                    console.log(`setTimeLeft(false)`)\n                    setTimeLeft(false)\n                }\n\n            }\n                foundBook = savedBooks.find(book=>book.id===mostRecent.book_id) // find most recently received book based on most recent waiting\n                if (foundBook){\n                    foundReview = foundBook.reviews.find(review=>review.user.id===user.id) // check if they left a review on it\n                    if (foundReview){\n                        setReviewLeft(true)\n                    }\n                    else{\n                        setReviewLeft(false) //if book was found without a review\n                    }\n                    \n                }\n                else{ // if no book is on received list\n                    setReviewLeft(true)\n                }\n        } \n    }\n    \n    function handleNextClick(){\n        if (waitlistIndex < waitlistMapped.length){\n            if (waitlistMapped.length - waitlistIndex > 8){\n                setWaitlistIndex(waitlistIndex+8)\n            }\n            else{\n            setWaitlistIndex(0)\n            }\n        }\n    }\n\n    if (user){\n        // console.log('timeleft:', timeLeft)\n        // console.log('reviewleft:', reviewLeft)\n        console.log('eligibilty:', user.eligible)\n        return(\n        <div className=\"userpage\"> \n\n        <div className=\"userpage-top-half\">\n\n             <div className=\"userpage-eligibility-info\" style={{float:'left'}}>\n\n                {user.eligible? <h3>Looks like {user.username} is eligible for their next book!</h3> : <h3>Looks like {user.username} needs to wait two weeks or leave a review to be eligible for their next book!</h3>}\n                {/* {reviewLeft === false && mostRecent!== null && (user.waitings.length > 0) ? (<div style={{margin:'auto'}} > <h3 >Please leave a review for</h3> <div style={{margin:'auto'}}><BackEndBookCard book={foundBook} style={{margin:'auto'}}/></div> </div>): null} */}\n            </div>\n\n                <div className=\"userpage-user-info\">\n                    <h3>Profile</h3>\n                    <Image src={user.profile_pic ? user.profile_pic : null} size=\"small\" circular style={{float:'left'}}/>\n                    <div style={{float:'left', marginLeft: '50px'}}>\n                        <h4 style={{display:'inline'}}>Name: </h4>{user.name ? user.name : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Email: </h4>{user.email ?  user.email : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Username: </h4>{user.username ? user.username : null }\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Bio: </h4>{user.bio ? user.bio : null}\n                    </div>\n                    \n                </div>\n                \n\n        </div>\n           \n\n                <h3 className=\"pop\">Waitlist</h3>\n                {waitingsMapped.length > 0 ? \n                    <>\n                        <div className=\"userpage-book-display\">\n                            <Card.Group itemsPerRow={8}>\n                                {waitlistMapped.slice(waitlistIndex, waitlistIndex+8)}  \n                            </Card.Group>\n                        </div>\n                        <Button className=\"next-back-button\"  onClick={handleNextClick}>Next</Button>\n                        {waitlistIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setIndex(waitlistIndex-8)}>Back</Button>: null}\n                    </>\n                :null}\n\n                <h3 className=\"pop\">Received</h3>\n                {waitingsFulFilledMapped.length > 0 ? \n                    <>\n                        <div className=\"userpage-book-display\">\n                            <Card.Group itemsPerRow={8}>\n                                {receivedMapped.slice(index, index+8)}  \n                            </Card.Group>\n                        </div>\n                        <Button className=\"next-back-button\"  onClick={()=>setIndex(index+8)}>Next</Button>\n                        {index > 0 ? <Button className=\"next-back-button\"  onClick={()=>setIndex(index-8)}>Back</Button>: null}\n                    </>\n                :null}\n\n\n                <h3 className=\"pop\">Sponsored</h3>\n                {sponsoredMapped.length > 0 ?\n                    <>\n                        <div className=\"userpage-book-display\">\n                            <Card.Group itemsPerRow={8}>\n                                {sponsoredMapped.slice(sponsoredIndex, sponsoredIndex+8)}  \n                            </Card.Group>\n                        </div>\n                        <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex+8)}>Next</Button>\n                        {sponsoredIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex-8)}>Back</Button>: null}\n                    </>\n                :null}\n\n            </div>\n        )\n\n    }\n    else{\n        return <>\n        Loading\n        \n        </>\n    }\n}\n\n\n// export default function OtherUserPage({savedBooks}){\n\n//     const [otherUser, setOtherUser] = useState(null)\n\n//     const params = useParams()\n//     let waitingsMapped = []\n//     let waitlistMapped = []\n    \n\n//     useEffect(()=>{\n//         fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${params.id}`)\n//         .then(response => response.json())\n//         .then(data=>setOtherUser(data))  \n//     },[])\n\n\n//     if (otherUser && savedBooks.length > 0){  \n\n//         let waitingsUnfulfilled = otherUser.waitings.filter(waiting=>waiting.fulfilled!==true)\n//         for(let i=0;i<waitingsUnfulfilled.length;i++){\n//         waitingsMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsUnfulfilled[i].book_id))\n//         } \n//         waitlistMapped = waitingsMapped.map(waiting=>{\n//             return (<BackEndBookCard book={waiting}/>)\n//         })\n \n//         return(\n//             <div> \n//                 <img src={otherUser.profile_pic ? otherUser.profile_pic : null}></img>\n//                 <p>name: {otherUser.name ? otherUser.name : null}</p>\n//                 <p>email: {otherUser.email ? otherUser.email : null}</p>\n//                 <p>username: {otherUser.username ? otherUser.username : null }</p>\n//                 <p>bio: {otherUser.bio ? otherUser.bio : null}</p>\n//                 <p>waitlist:</p>\n//                 <ul>{waitingsMapped.length > 0 ? waitlistMapped:null}</ul>\n//             </div>\n//         )\n//     }\n    \n//     else{\n//         return <p>loading</p>\n//     }\n// }\n","import {Route, Switch, Redirect} from 'react-router-dom'\nimport './App.css';\nimport 'semantic-ui-css/semantic.min.css'\nimport MainNav from './components/pages/MainNav/MainNav'\nimport React, { useEffect, useState } from \"react\"\nimport BookIndex from './components/pages/BookIndex/BookIndex'\nimport BookPage from './components/pages/BookPage/BookPage'\nimport Home from './components/pages/Home/Home'\nimport UserPage from './components/pages/UserPage/UserPage'\nimport OtherUserPage from './components/pages/OtherUserPage/OtherUserPage'\n\nfunction App() {\n\n  const [booksFromSearch, setBooksFromSearch] = useState([])\n  const [user, setUser] = useState(null)\n  const [savedBooks, setSavedBooks] = useState([])\n  const [startIndex, setStartIndex] = useState(0)\n  const [timeLeft, setTimeLeft] = useState(true)\n  const [reviewLeft, setReviewLeft] = useState(false)\n\n  \n  useEffect(()=>{\n    setTimeLeft(false)\n    setReviewLeft(true)\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n    .then(response=>response.json())\n    .then(data=>setSavedBooks(data))\n  },[user])\n\n\n  useEffect(()=>{\n    if (user){\n      if (timeLeft === false && reviewLeft === true){\n        let confObj = {\n              method: 'PATCH',\n              headers: {\n                  'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({eligible: true}),\n          }\n          fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${user.id}`, confObj)\n      }\n\n      if (timeLeft === true || reviewLeft === false){\n        let confObj = {\n              method: 'PATCH',\n              headers: {\n                  'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({eligible: false}),\n          }\n          fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${user.id}`, confObj)\n      }\n    }\n  },[timeLeft, reviewLeft, savedBooks, user])\n\n\n  return (\n    <div className=\"app\">\n    <MainNav\n      setUser={setUser}\n      user={user}\n      setBooksFromSearch={setBooksFromSearch}\n      startIndex={startIndex}\n      setStartIndex={setStartIndex}\n    />\n      <Switch>\n        <Redirect exact from=\"/\" to=\"/home\" />\n        <Route path=\"/home\">\n          <Home />\n        </Route>\n        <Route path=\"/bookindex\">\n          <BookIndex \n            booksFromSearch={booksFromSearch}\n            startIndex={startIndex}\n            setStartIndex={setStartIndex}\n          />\n        </Route>\n        <Route path=\"/bookpage/:id\">\n          <BookPage \n          savedBooks={savedBooks} \n          setSavedBooks={setSavedBooks} \n          user={user} \n          setUser={setUser}\n          reviewLeft={reviewLeft}\n          timeLeft={timeLeft}\n          setBooksFromSearch={setBooksFromSearch}\n          startIndex={startIndex}\n          setStartIndex={setStartIndex}\n        />\n        </Route>\n        <Route path=\"/otheruserpage/:id\">\n          <OtherUserPage \n          user={user} \n          savedBooks={savedBooks} \n          timeLeft={timeLeft} \n          setTimeLeft={setTimeLeft}\n          reviewLeft={reviewLeft}\n          setReviewLeft={setReviewLeft}/>\n        </Route>\n        <Route exact path=\"/userpage\">\n          {user ? \n          <UserPage \n            user={user} \n            savedBooks={savedBooks} \n            timeLeft={timeLeft} \n            setTimeLeft={setTimeLeft}\n            reviewLeft={reviewLeft}\n            setReviewLeft={setReviewLeft}\n          /> : <Redirect to = \"/home\"/>}\n          \n        </Route>\n      </Switch>\n    </div>\n  \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter} from 'react-router-dom'\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}