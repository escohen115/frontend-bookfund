{"version":3,"sources":["components/pages/MainNav/Search.js","components/pages/MainNav/SignUp.js","components/pages/MainNav/LogIn.js","components/pages/MainNav/MainNav.js","components/pages/BookIndex/BookCard.js","components/pages/BookIndex/BookIndex.js","components/pages/BookPage/SponsorForm.js","components/pages/BookPage/ReviewForm.js","components/pages/BookPage/BookPage.js","components/pages/BookIndex/BackEndBookCard.js","components/pages/Home/Home.js","components/pages/UserPage/Timer.js","components/pages/UserPage/SponsorList.js","components/pages/UserPage/WaitList.js","components/pages/UserPage/ReceivedList.js","components/pages/UserPage/UserPage.js","components/pages/OtherUserPage/OtherUserPage.js","App.js","index.js"],"names":["Search","setBooksFromSearch","startIndex","setStartIndex","useState","searchInput","setSearchInput","history","useHistory","useEffect","searchTerms","replace","fetch","then","response","json","data","items","onSubmit","e","preventDefault","push","Input","icon","placeholder","type","onChange","target","value","className","SignUp","user","setUser","open","setOpen","eligible","formState","setFormState","handleChange","name","console","log","Modal","onClose","onOpen","trigger","Button","Header","Content","Form","form","FormData","append","profile_pic","username","bio","email","confObj","method","body","process","error","alert","handleSubmit","Field","fluid","label","persist","files","handleImage","style","float","marginBottom","LogIn","headers","JSON","stringify","MainNav","to","color","onClick","BookCard","book","Card","textAlign","Image","size","src","volumeInfo","imageLinks","thumbnail","wrapped","ui","title","id","slice","Description","authors","BookIndex","booksFromSearch","booksMapped","map","marginTop","Group","itemsPerRow","SponsorForm","waitingsMapped","waitlistRequest","setWaitlistRequest","toggleSponsorForm","setBackEndBook","backEndBook","setToggleSponsorForm","number","setNumber","num_books_funded","sponsor_id","handleSponsorSubmission","length","ReviewForm","setSavedBooks","waitListRequestAndStoreInDBRequest","storeInDB","text","rating","count","color2","reply","TextArea","rows","cols","user_id","book_id","content","labelPosition","primary","BookPage","savedBooks","reviewLeft","setBook","params","useParams","bookId","setBookId","similarIndex","setSimilarIndex","users","setUsers","waitingsFulfilledMapped","reviewsMapped","averageRating","sponsorsMapped","stripHtml","html","tmp","document","createElement","innerHTML","textContent","innerText","bookIdea","fulfilled","foundBook","find","api_id","subtitle","publisher","publishedDate","description","image_url","join","waitings","reviews","split","pop","sponsorsFiltered","filter","waiting","arr","x","wait","elem","circular","review","reduce","accumulator","currentValue","edit","reviewId","parseInt","handleCommentDelete","margin","BackendBookCard","Meta","Home","books","setBooks","backEndWaitings","setBackEndWaitings","index","setIndex","topReaders","topReadersMapped","i","waitingsFulFilled","sort","a","b","Object","keys","values","sponsoredWaitings","sponsorAOH","userSponsors","sponsor","extra","Icon","reader","fontSize","display","Timer","mostRecent","setTimeLeft","timeLeft","setDisplayTimerTwo","displayTimer","timerDays","setTimerDays","timerHours","setTimerHours","timerMinutes","setTimerMinutes","timerSeconds","setTimerSeconds","interval","useRef","countDownDate","Date","sponsor_date","setInterval","now","getTime","timeRemaining","days","Math","floor","hours","minutes","seconds","clearInterval","current","startTimer","class","SponsorList","allWaitings","sponsoredMapped","sponsoredIndex","setSponsoredIndex","arrTwo","savedBook","WaitList","waitlistMapped","waitlistIndex","setWaitlistIndex","waitingsUnfulfilled","saved_book","ReceivedList","waitingsFulFilledMapped","receivedMapped","UserPage","setReviewLeft","foundReview","setAllWaitings","displayTimerTwo","waitingsFulfilled","creationDate","marginLeft","OtherUserPage","App","exact","from","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5d9f5764.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useHistory } from \"react-router-dom\";\n\nimport { Input } from 'semantic-ui-react'\n\nexport default function Search ({setBooksFromSearch, startIndex, setStartIndex}){\n\n    const [searchInput, setSearchInput] = useState(\"\")\n    const history = useHistory()\n\n    useEffect(()=>{\n        let searchTerms = searchInput.replace(/\\s/g, '+')\n        fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerms}&maxResults=8&startIndex=${startIndex}`)\n        .then(response=>response.json())\n        .then(data=>{\n            setBooksFromSearch(data.items)\n        })\n    },[startIndex, searchInput, setBooksFromSearch])\n\n    function handleSubmit(e){\n        e.preventDefault()\n        setStartIndex(0)\n        let searchTerms = searchInput.replace(/\\s/g, '+')\n        fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerms}&maxResults=8&startIndex=${startIndex}`)\n        .then(response=>response.json())\n        .then(data=>{\n            setBooksFromSearch(data.items)\n            history.push(`/bookindex`)\n        })\n    }\n\n    return(\n        \n            <form onSubmit={handleSubmit}>\n                <Input icon='search' placeholder='Search...' \n                type=\"text\"\n                onChange={e=>setSearchInput(e.target.value)}\n                value={searchInput}\n                className=\"search-input\"/>\n            {/* <button type='submit' className=\"fa fa-search\"> Search </button> */}\n            </form>\n    )\n}","import React,{useState} from \"react\"\nimport { Button, Modal, Form } from 'semantic-ui-react'\nimport { useHistory } from \"react-router-dom\";\n\n\nexport default function SignUp({user, setUser}) {\n\n    let history = useHistory()\n    const [open, setOpen] = useState(false)\n    const [formState, setFormState] = useState({\n            eligible: true\n        })\n\n    function handleChange(e){\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.value\n        })   \n    }\n\n    function handleImage (e){\n        e.persist()\n        setFormState({\n            ...formState,\n            [e.target.name]: e.target.files[0]\n        })\n    }\n    console.log(formState)\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const form = new FormData()\n\n        form.append(\"profile_pic\", formState.profile_pic)\n        form.append(\"username\", formState.username)\n        form.append(\"name\", formState.name)\n        form.append(\"bio\", formState.bio)\n        form.append(\"email\", formState.email)\n      \n\n        console.log(formState)\n        \n        let confObj = {\n            method: 'POST',\n            body: (form),\n        }\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            if (data.error){\n                alert(\"Username must be unique\")\n                setFormState({})\n            }\n            else{\n                alert(`welcome aboard ${data.username}!`)\n                setUser(data)\n                setFormState({})\n                history.push('/userpage')\n            }\n        })\n    \n    }\n  \n  return (\n    <Modal\n      onClose={() => setOpen(false)}\n      onOpen={() => setOpen(true)}\n      open={open}\n      trigger={<Button>Sign Up</Button>}\n    >\n      <Modal.Header>Sign Up</Modal.Header>\n      <Modal.Content >\n           {/* <div className=\"form \">\n\n            <form className=\"signup\" onSubmit={(e)=>handleSubmit(e)}>\n                <label>\n                    Username:\n                    <input type=\"text\" name=\"username\" onChange={(e)=>handleChange(e)}/>\n                <Form.Input \n                type=\"file\" \n                name=\"profile_pic\" \n                fluid label='Image Upload' \n                onChange={(e)=>handleImage(e)} \n                />\n                </label>\n                    <input type=\"submit\" value=\"Sign Up\" className=\"button\"/>\n            </form>\n    \n        </div> */}\n\n        <Form onSubmit={(e)=>handleSubmit(e)}>\n                    <Form.Field>\n                        <label>Name</label>\n                        <input placeholder='Name' name=\"name\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Username</label>\n                        <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Email</label>\n                        <input placeholder='Email' name=\"email\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Password</label>\n                        <input placeholder='Password' type=\"password\" />\n                    </Form.Field>\n                    <Form.Field >\n                        <label>Bio</label>\n                        <input placeholder='Bio' name=\"bio\" onChange={(e)=>handleChange(e)}/>\n                    </Form.Field>\n                    <Form.Input \n                    type=\"file\" \n                    name=\"profile_pic\" \n                    fluid label='Image Upload' \n                    onChange={(e)=>handleImage(e)} \n                    />\n                    <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Sign Up</Button>\n                </Form>\n         \n      </Modal.Content>\n\n    </Modal>\n  )\n}\n\n\n\n","import React,{useEffect, useState} from \"react\"\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Modal, Form } from 'semantic-ui-react'\n\nexport default function LogIn ({setUser, user}){\n\n    let history = useHistory()\n\n    const [open, setOpen] = useState(false)\n    const [formState, setFormState] = useState({})\n\n    useEffect(()=>{\n        history.push('/userpage')\n    },[user, history])\n\n    function handleChange(e){\n        setFormState({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        setOpen(false)\n        let confObj = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(formState),\n        }\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users/login`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            console.log(data)\n            setUser(data)      \n            history.push('/userpage')\n            \n        })\n\n    }\n\n    return (\n        <Modal\n      onClose={() => setOpen(false)}\n      onOpen={() => setOpen(true)}\n      open={open}\n      trigger={<Button>Log In</Button>}\n    >\n      <Modal.Header>Log In</Modal.Header>\n      <Modal.Content >\n           <div className=\"form \">\n                {/* <form className=\"signup\" onSubmit={(e)=>handleSubmit(e)}>\n                    <label>\n                        Username:\n                        <input type=\"text\" name=\"username\" onChange={(e)=>handleChange(e)}/>\n                    </label>\n                        <input type=\"submit\" value=\"Login\" className=\"button\"/>\n                </form> */}\n                <Form onSubmit={(e)=>handleSubmit(e)}>\n                    <Form.Field>\n                        <label>Username</label>\n                        <input placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e)}/>\n                        \n                    </Form.Field>\n                    <Form.Field>\n                        <label>Password</label>\n                        <input placeholder='Password' type=\"password\" />\n                    </Form.Field>\n                    <Button type='submit' style={{float:'right', marginBottom: '10px'}}>Login</Button>\n                </Form>\n\n            </div>\n        \n      </Modal.Content>\n    </Modal>\n        \n    )\n}\n\n","import Search from './Search'\nimport SignUp from './SignUp'\nimport LogIn from './LogIn'\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { Button } from 'semantic-ui-react'\n\nexport default function MainNav ({setBooksFromSearch, setUser, user, startIndex, setStartIndex}){\n\n    let history = useHistory()\n\n    function handleSignOut(){\n        history.push('/home')\n        setUser(null)\n    }\n\n    return(\n\n        <div className=\"main-nav\">\n\n            <ul>\n                <li className=\"logo\">\n                    <NavLink to=\"/\" style={{color:' #333'}}> \n                        <h1 className=\"logo-text\" >bookFun(d)</h1>\n                        {/* <h9 className=\"signed-in\">{user ? `signed in as ${user.username}`: \"not signed in\"} </h9>   */}\n                    </NavLink>\n                </li>\n                <li className= \"search-form\">\n                    <Search \n                    setBooksFromSearch={setBooksFromSearch}\n                    startIndex={startIndex}\n                    setStartIndex={setStartIndex}\n                    />\n                </li>\n                <div className = \"navLinks\">\n                    \n                        {/* {user ? null :<NavLink to=\"/signup\"> SignUp </NavLink> } */}\n                        {user ? null :<SignUp user={user} setUser={setUser}/> }\n                    \n                        \n                            {user ? null :<LogIn style={{color: 'inherit'}} user={user} setUser={setUser}/> }\n                        \n                    \n                        \n                            {user ? <Button><NavLink style={{color: 'inherit'}} to=\"/userpage\">  My Page  </NavLink></Button> :null}\n                        \n\n                        \n                            {user?<Button onClick={()=>handleSignOut()}>  Sign Out  </Button>:null}\n                        \n\n                        <Button>\n                            <NavLink style={{color: 'inherit'}} to=\"/\">  Home  </NavLink>\n                        </Button>\n                    \n                </div>\n                \n            </ul>\n        </div>\n    )\n\n}","import {Link} from 'react-router-dom'\nimport { Card, Image } from 'semantic-ui-react'\n\nexport default function BookCard({book}){\n    return(\n        <Card style={{textAlign: 'center'}}>\n            <Image \n                size='tiny' \n                src={ book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail: null }wrapped ui={false} \n            />\n            <Card.Content>\n            <Card.Header>\n                {book.volumeInfo.title ? <Link to={`/bookpage/${book.id}`}>{book.volumeInfo.title.slice(0,50)} </Link> : null}\n            </Card.Header>\n            <Card.Description>\n                {book.volumeInfo.authors ? book.volumeInfo.authors[0].slice(0,50): null}\n            </Card.Description>\n            </Card.Content>\n        </Card>\n        )\n}\n\n","import BookCard from './BookCard'\nimport { Card, Button } from 'semantic-ui-react'\n\nexport default function BookIndex ({booksFromSearch, startIndex, setStartIndex}){\n\n    let booksMapped = []\n\n    if (booksFromSearch){\n         booksMapped = booksFromSearch.map(book=>{\n\n            return(\n                <BookCard book ={book}/>\n            )\n        })\n    }\n    \n    return (\n        <div className=\"book-index\" style={{marginTop:'100px'}}>\n            <Card.Group itemsPerRow={8}>\n                {booksMapped}  \n            </Card.Group>\n            <div className=\"buttons-combined\" style={{marginTop:'20px'}}>\n                <Button className=\"next-back-button\"  onClick={()=>setStartIndex(startIndex+8)}>Next</Button>\n                {startIndex > 0 ? <Button className=\"next-back-button\" onClick={()=>setStartIndex(startIndex-8)}>Back</Button>: null}\n            </div>     \n        </div>\n    )\n}","import {useState } from \"react\";\n\nexport default function SponsorForm({waitingsMapped, book, user, setUser, waitlistRequest, setWaitlistRequest, setBackEndBook, backEndBook, toggleSponsorForm, setToggleSponsorForm}){\n    \n\n    const[number, setNumber] = useState(0)\n\n\n    function handleSponsorSubmission(e){\n        e.preventDefault()\n\n        let confObj = {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({num_books_funded: e.target.number.value, sponsor_id: user.id })\n        }\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings/sponsor/${book.id}`, confObj)\n        .then(response=>response.json())\n        .then(data=>{\n            setToggleSponsorForm(!toggleSponsorForm)\n            setWaitlistRequest(!waitlistRequest)\n        })\n   \n\n    }\n\n        return (\n            <form className=\"signup\" onSubmit={e=>handleSponsorSubmission(e)} >\n                <label>Number of copies I'd like to sponsor:</label>\n                    <input type=\"number\" name=\"number\" value={number} onChange={e=>setNumber(e.target.value)}/>\n                    {number > waitingsMapped.length ? (\n                        <p style={{ color: \"red\" }}>Please enter a number smaller than the waitlist total</p>\n                    ) : null}\n                    <input type=\"submit\" value=\"Sponsor\" className=\"button\"/>\n            </form>\n        )\n\n    }\n    ","import {useState } from \"react\";\nimport ReactStars from 'react-stars'\nimport { Button, Form } from 'semantic-ui-react'\n\nexport default function ReviewForm ({user, book, setSavedBooks, setWaitlistRequest, \n    waitlistRequest, waitListRequestAndStoreInDBRequest, backEndBook, setBackEndBook, storeInDB}){\n\n    \n    const [formState, setFormState] = useState({\n        text: \"\",\n        rating: 0\n    })\n\n    function handleChange(e){    \n        if (user){\n            storeInDB()\n            setFormState({\n                user_id: user.id, \n                book_id: book.id,\n                ...formState,\n                [e.target.name] : e.target.value\n            })\n        }\n        else{\n            debugger\n            setFormState({})\n            alert(\"Please sign in to leave a review.\")\n        }\n    }\n\n    function ratingChanged(e){\n         if (user){\n            storeInDB()\n            setFormState({\n                ...formState,\n                rating: e\n            })\n        }\n        else{\n            setFormState({})\n            alert(\"Please sign in to leave a rating.\")\n        }\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        if (formState.text.length < 100){\n            alert(\"Please leave a review with more than 100 characters.\")\n        }\n        if (formState.text.length > 100){\n            let confObj = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(formState),\n                }\n\n            fetch(`${process.env.REACT_APP_API_BASE_URL}/reviews`, confObj)\n            .then(data=>{\n                setWaitlistRequest(!waitlistRequest)\n                setBackEndBook(true)\n                fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n                .then(response=>response.json())\n                .then(data=>{setSavedBooks(data)})\n            })\n            \n        }\n    }\n\n    return (\n    <div>\n        <h3>Leave A Review</h3>\n        <ReactStars\n            className=\"react-stars\"\n            count={5}\n            onChange={ratingChanged}\n            size={20}\n            color2={'#ffd700'} \n            value={formState.rating}\n            name=\"rating\"/>\n            \n        <Form reply onSubmit={e=>handleSubmit(e)}>\n            <Form.TextArea \n                value={formState.text}\n                name=\"text\"             \n                rows={3}\n                cols={25}\n                onChange={e=>handleChange(e)}/>\n            <Button type='submit' content='Add Review' labelPosition='left' icon='edit' primary />\n        </Form>\n        \n    </div> \n    )\n    \n}\n","import { useEffect, useState } from \"react\";\nimport { useParams, Link,  } from \"react-router-dom\";\nimport SponsorForm from './SponsorForm'\nimport ReviewForm from './ReviewForm'\nimport BookCard from '../BookIndex/BookCard'\nimport { Card, Button, Image } from 'semantic-ui-react'\nimport ReactStars from 'react-stars'\n\nexport default function BookPage({setSavedBooks, savedBooks, user, setUser, reviewLeft}){\n \n    const [book, setBook] = useState ({})\n    const [backEndBook, setBackEndBook] = useState(false)\n    const [waitlistRequest, setWaitlistRequest] = useState(false)\n    const [toggleSponsorForm, setToggleSponsorForm] = useState(false)\n    const [booksFromSearch, setBooksFromSearch] = useState([])\n    const params = useParams()\n    const [bookId, setBookId] = useState(0)\n    const[similarIndex, setSimilarIndex] = useState(0)\n    const [users, setUsers] = useState([])\n\n    let waitingsMapped = null\n    let waitingsFulfilledMapped = null\n    let reviewsMapped = null\n    let booksMapped = []\n    let averageRating = 0\n    let sponsorsMapped=[]\n\n    function stripHtml(html){\n        let tmp = document.createElement(\"DIV\");\n        tmp.innerHTML = html;\n        return tmp.textContent || tmp.innerText || \"\";\n    }\n\n    useEffect(()=>{\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n        .then(response=>response.json())\n        .then(data=>{\n            let foundBook = null\n            foundBook = data.find(book=>book.api_id===params.id)\n            setBook(foundBook)\n\n            if (foundBook){\n                setBookId (foundBook.id)\n                setBackEndBook(true)\n            }\n            if (!foundBook){\n                fetch(`https://www.googleapis.com/books/v1/volumes/${params.id}`)\n                .then(response => response.json())\n                .then(data=>{\n                    let title = \"\"\n                    let subtitle = \"\"\n                    let authors = [\"\"]\n                    let publisher = \"\"\n                    let publishedDate = \"\"\n                    let description = \"\"\n                    let image_url = \"\"\n                    if (data.volumeInfo.title){\n                        title = data.volumeInfo.title\n                    }\n                    if (data.volumeInfo.authors){\n                        authors = data.volumeInfo.authors\n                    }\n                    if (data.volumeInfo.subtitle){\n                        subtitle = data.volumeInfo.subtitle\n                    }\n                    if (data.volumeInfo.publisher){\n                        publisher = data.volumeInfo.publisher\n                    }\n                    if (data.volumeInfo.publishedDate){\n                        publishedDate = data.volumeInfo.publishedDate\n                    }\n                    if (data.volumeInfo.description){\n                        description = data.volumeInfo.description\n                    }\n                    if (data.volumeInfo.imageLinks){\n                        image_url = data.volumeInfo.imageLinks.thumbnail\n                    }\n                    setBook({\n                        title: title, \n                        subtitle: subtitle, \n                        authors: authors.join(\", \"), \n                        publisher: publisher, \n                        publishedDate: publishedDate, \n                        description: stripHtml(description),\n                        image_url: image_url, \n                        api_id: data.id, \n                        waitings: [],\n                        reviews: []\n                    })\n                })\n            }\n        })\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users`)\n        .then(response=>response.json())\n        .then(data=>setUsers(data))\n\n    },[waitlistRequest, backEndBook, params.id, bookId])\n\n    useEffect(()=>{\n        if (book){\n            if (book.title){\n                let searchTerms = book.title.split(\" \").pop()\n                fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerms}&maxResults=20`)\n                .then(response=>response.json())\n                .then(data=>{\n                    setBooksFromSearch(data.items)\n                })\n            }\n        }\n    },[book])\n\n    function storeInDB(){\n        if (user){\n            let confObj = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(book),\n            }\n            fetch(`${process.env.REACT_APP_API_BASE_URL}/books`, confObj)\n            .then(response=>response.json())\n            .then(data=>{\n                setBook(data)\n                setBookId(data.id)\n                setBackEndBook(true)\n                setWaitlistRequest(!waitlistRequest)\n            })\n        }\n        else{\n            alert('Please sign in to leave a review.')\n        }\n    }\n\n\n   \n\n    function waitListRequestAndStoreInDBRequest (){\n        if (user){\n            let confObj = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(book),\n            }\n            fetch(`${process.env.REACT_APP_API_BASE_URL}/books`, confObj)\n            .then(response=>response.json())\n            .then(data=>{\n                setBook(data)\n                setBookId(data.id)\n                let bookIdea = data.id\n                let confObj = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({user_id: user.id, book_id: bookIdea, fulfilled: false}),\n                }\n                fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`, confObj)\n                .then(response=>response.json())\n                .then(data=>{                  \n                    setBackEndBook(true)\n                    setWaitlistRequest(!waitlistRequest)\n                    if (data.error){\n                        alert(`${data.error}`)\n                    }\n                    // else{\n                    //     fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n                    //     .then(response=>response.json())\n                    //     .then(data=>setSavedBooks(data))\n                    // }\n                })\n            })\n        }\n\n        else{\n            alert('Please sign in to join a waitlist.')\n        }\n    }\n\n    if (booksFromSearch.length > 0){\n         booksMapped = booksFromSearch.slice(similarIndex, similarIndex+3).map(book=>{\n            return(\n                <BookCard book = {book}/>\n            )\n        })\n    }\n   \n    \n\n    if (backEndBook === true && book){\n         if (users.length > 0){\n            let sponsorsFiltered = book.waitings.filter(waiting=>waiting.fulfilled===true)\n            let arr = []\n            sponsorsMapped = sponsorsFiltered.map(waiting=>{\n                let x = sponsorsFiltered.filter(wait=>wait.sponsor_id===waiting.sponsor_id).length\n\n                if (arr.find(elem=>elem===waiting.sponsor_id)){\n                    return null\n                }\n                else{\n                arr.push(waiting.sponsor_id)\n                    return(\n                    <li>\n                        <Image src={users.find(user=>user.id===waiting.sponsor_id).profile_pic  ? users.find(user=>user.id===waiting.sponsor_id).profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                        <Link to={`/otheruserpage/${waiting.sponsor_id}`}>\n                            {users.find(user=>user.id===waiting.sponsor_id).username} \n                        </Link>\n                        <div style={{float: 'right'}}> {x} {x === 1 ? \" copy\" : \"copies\"}</div>\n                    </li>)\n                }\n            })\n            sponsorsMapped = sponsorsMapped.filter(waiting=>waiting!==null)\n        }\n         \n        waitingsMapped = book.waitings.map(waiting=>{\n            if (waiting.fulfilled !== true){\n                console.log(waiting.user)\n                return(\n                <li>\n                    <Image src={waiting.user.profile_pic ? waiting.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                    <Link to={`/otheruserpage/${waiting.user.id}`}>\n                        {waiting.user.username} {waiting.user.eligible? \"(eligible)\": \"(ineligible)\"}\n                    </Link>\n                </li>)\n            }\n        })\n        \n        waitingsFulfilledMapped = book.waitings.map(waiting=>{\n            if (waiting.fulfilled === true){\n                return<li>\n                        <Image src={waiting.user.profile_pic ? waiting.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                        <Link to={`/otheruserpage/${waiting.user.id}`}>{waiting.user.username}</Link>\n                    </li>\n            }\n        })\n\n        reviewsMapped = book.reviews.map(review=>{  \n            \n            if (user){\n                let reducer = (accumulator, currentValue) => accumulator + currentValue;\n                averageRating = book.reviews.map(review=>review.rating).reduce(reducer)/book.reviews.length\n                return(\n                    <div className=\"review\">\n                        <Image src={review.user.profile_pic ? review.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini'  circular/>\n                        <Link to={`/otheruserpage/${review.user.id}`}>{review.user.username}</Link> \n                        <ReactStars\n                            className=\"react-stars\"\n                            count={5}\n                            value={review.rating}\n                            size={15}\n                            color2={'#ffd700'}\n                            edit={false}\n                            // style={{fontSize: '20px'}}\n                        />\n                        {review.text} \n                        {review.user.id === user.id ? <Button size='mini' id={review.id} onClick={e=>handleCommentDelete(e)}>Delete</Button> :null}\n                    </div>\n                )   \n            }\n            else{\n                let reducer = (accumulator, currentValue) => accumulator + currentValue;\n                averageRating = book.reviews.map(review=>review.rating).reduce(reducer)/book.reviews.length\n                return(\n                    <li>\n                        <div>\n                            <Image src={review.user.profile_pic ? review.user.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='mini' circular />\n                            <Link to={`/otheruserpage/${review.user.id}`}>{review.user.username}</Link> \n                            <ReactStars\n                                className=\"react-stars\"\n                                count={5}\n                                value={review.rating}\n                                size={15}\n                                color2={'#ffd700'}\n                                edit={false}\n                            />\n                        </div>\n                        {review.text} \n                    </li>\n                )   \n            }\n        })\n    }\n\n    function handleCommentDelete(e){\n        let reviewId = parseInt(e.target.id)\n        let confObj = {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json',\n            }\n        }\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/reviews/${reviewId}`, confObj)\n        .then(data=>setWaitlistRequest(!waitlistRequest))\n\n    }\n\n    function handleToggleRequest(){\n        if (user){\n            if (backEndBook){\n                setToggleSponsorForm(!toggleSponsorForm)\n            }\n            else{\n                alert(\"There is no one on the waitlist.\")\n            }\n        }\n        else{\n        alert(\"Please log in to Sponsor\")\n        }\n    }\n\n    function similarNext(){\n        if (similarIndex < booksFromSearch.length - 2){\n            setSimilarIndex(similarIndex+3)\n        }\n        else{\n            alert('No More Books to Display')\n        }\n    }\n\n    function similarBack(){\n        setSimilarIndex(similarIndex-3)\n    }\n\n    return(\n        <div className=\"bookpage\">\n            <div className=\"book-info\">\n                <div className=\"book-info-image\">\n                    <Image style={{margin: '40px', float:'right'}}size='small-medium'src={ book ? book.image_url: \"N/A\" }/>\n                </div>\n                <div className=\"book-info-info\">\n                    <h2 style={{marginBottom: '-15px'}}>{book? book.title: \"N/A\"}</h2>\n                    <h3>{book? book.subtitle: \"N/A\"}</h3>\n                    {reviewsMapped ? \n                        <ReactStars\n                            className=\"react-stars\"\n                            count={5}\n                            value={averageRating}\n                            size={20}\n                            color2={'#ffd700'}\n                            edit={false}\n                        />\n                    : null}\n                \n                        <b>by:</b> {book? book.authors: \"N/A\"} ({book? book.publishedDate: \"N/A\"})\n                    \n                        <br></br>\n                        <b>Publishing House:</b> {book? book.publisher: \"N/A\"}\n                        <br></br>\n                        \n                        <b>Description:</b> \n                        <p>\n                            {book? book.description: \"N/A\"} \n                        </p>\n                </div>\n\n\n            </div>\n            \n\n            { book ? \n            <>\n                <div className=\"reviews\">\n                    <h3>Reviews</h3>\n                    {backEndBook && reviewsMapped.length > 0 ? \n                        <ul className=\"reviewsUl\"> {reviewsMapped} </ul> \n                    : \"No one has reviewed this book yet. Be the first!\"} \n                    <ReviewForm \n                    storeInDB={storeInDB}\n                    user={user} \n                    book={book} \n                    waitlistRequest={waitlistRequest} \n                    setWaitlistRequest={setWaitlistRequest}\n                    backEndBook={backEndBook}\n                    setBackEndBook={setBackEndBook}\n                    setSavedBooks={setSavedBooks}\n                    waitListRequestAndStoreInDBRequest={waitListRequestAndStoreInDBRequest}\n                    toggleSponsorForm={toggleSponsorForm} \n                    setToggleSponsorForm={setToggleSponsorForm}/>\n                </div>\n\n                <div className=\"bookpage-recipients-list\">\n                    <h3  style={{textAlign: 'center'}}>Recipients</h3>\n                    {backEndBook && waitingsFulfilledMapped.length > 0 ? <ol> {waitingsFulfilledMapped}  </ol>: \"No one has received this book yet. Join the waitlist to be the first!\"}\n                        \n                </div>\n                <div className= \"bookpage-waiting-list\">\n                    <h3 style={{textAlign: 'center'}}>Waitlist</h3>\n                    <ol>{ backEndBook && waitingsMapped.length > 0 ? waitingsMapped: \"No one is currently waiting for this book. Be the first!\"} </ol>\n                    <Button className=\"waiting-button\" onClick={waitListRequestAndStoreInDBRequest}>Join the Waitlist</Button>\n\n                </div>\n                <div className= \"bookpage-sponsor-list\">\n                    <h3 style={{textAlign: 'center'}}>Sponsors</h3>\n                    <ol>{ backEndBook && sponsorsMapped.length > 0 ? sponsorsMapped: \"No one has sponsored this book yet.  Be the first!\"} </ol>\n                    <Button onClick={handleToggleRequest}> Sponsor this Book</Button>\n                        {toggleSponsorForm ? \n                            <SponsorForm \n                                waitingsMapped={waitingsMapped} \n                                book={book} \n                                user={user}\n                                setUser={setUser}\n                                waitlistRequest={waitlistRequest}\n                                setWaitlistRequest={setWaitlistRequest}\n                                setBackEndBook={setBackEndBook}\n                                backEndBook={backEndBook}\n                                setToggleSponsorForm={setToggleSponsorForm}\n                                toggleSponsorForm={ toggleSponsorForm}\n                            /> \n                        : null}\n                </div>\n                </>\n            : null\n            }\n            <div className = \"similar-books\">\n                <h3>Similar Books</h3>\n                {booksFromSearch.length > 0 ? \n                    <Card.Group itemsPerRow={3}>\n                        {booksMapped}  \n                    </Card.Group>\n                : null}\n                \n                <div className=\"buttons-combined\">\n                    <Button className=\"next-back-button\" onClick={()=>similarNext(similarIndex+3)}>See More</Button>\n                    {similarIndex > 0 ? <Button className=\"next-back-button\" onClick={()=>similarBack(similarIndex+3)}>Go Back</Button>: null}\n                </div>\n            </div>\n            \n        </div>\n    )\n\n}\n\n\n\n\n\n\n\n\n\n\n","import {Link} from 'react-router-dom'\nimport { Card, Image } from 'semantic-ui-react'\n\nexport default function BackendBookCard({book, style}){\n    if (book){\n        return(\n        // <div className=\"book-card\">\n                <Card style={{textAlign: 'center'}, style}>\n                    <Image size=\"small\" src={ book.image_url ? book.image_url: null }wrapped ui={false} />\n                    <Card.Content>\n                    <Card.Header>\n                        {book.title ? <Link to={`/bookpage/${book.api_id}`}>{book.title.slice(0,50)} </Link>:null}\n                    </Card.Header>\n                    <Card.Meta>\n                        {book.subtitle? book.subtitle.slice(0,50): null}\n                    </Card.Meta>\n                    <Card.Description>\n                        <span className='date'>{book.authors ? book.authors: null}</span>\n                    </Card.Description>\n                    </Card.Content>\n                    {/* <Card.Content extra>\n                    <a>\n                        <Icon name='star' />\n                        22 Friends\n                    </a>\n                    </Card.Content> */}\n                </Card>\n        // </div>\n        )\n    }\n    else{\n        return (null)\n    }\n    \n}","import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport { Card, Button, Image, Icon} from 'semantic-ui-react'\n\nexport default function Home(){\n\n    const[books,setBooks] = useState([])\n    const[backEndWaitings, setBackEndWaitings] = useState([])\n    const[users, setUsers] = useState([])\n    const[index, setIndex] = useState(0)\n\n    let waitings = []\n    let waitingsMapped = []\n    let sponsorsMapped = []\n    let topReaders = []\n    let topReadersMapped = []\n    // console.log(process.env.REACT_APP_API_BASE_URL)\n    useEffect(()=>{\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n        .then(response=>response.json())\n        .then(data=>{setBooks(data)})\n\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users`)\n        .then(response=>response.json())\n        .then(data=>{setUsers(data)})\n        \n        fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n        .then(response=>response.json())\n        .then(data=>{setBackEndWaitings(data)})\n    },[])\n\n    \n\n\n     if (books.length > 0){\n        for(let i=0;i < books.length;i++){\n            let waitingsFulFilled = books[i].waitings.filter(waitings=>waitings.fulfilled!==false).length\n\n            waitings.push({[waitingsFulFilled]:books[i]})\n        }\n        waitings.sort(function (a, b){\n            return Object.keys(b)[0] - Object.keys(a)[0]\n        })\n        waitingsMapped = waitings.slice(index, (index+8)).map(waiting=>{\n            return( <BackEndBookCard book = {Object.values(waiting)[0]}/>)\n        })\n    }\n\n    if (backEndWaitings.length > 0){ \n        let sponsoredWaitings = backEndWaitings.filter(waiting=>waiting.fulfilled===true)\n        let sponsorAOH=[]\n        for (let i=0;i<users.length;i++){\n            let userSponsors = sponsoredWaitings.filter(waiting=>waiting.sponsor_id===users[i].id)\n            sponsorAOH.push({[userSponsors.length]:users[i]})\n        }\n        let x = sponsorAOH.sort(function (a, b){\n            return Object.keys(b)[0] - Object.keys(a)[0]\n        })\n        sponsorsMapped = x.slice(0,3).map(sponsor=>{\n            return( \n                    <Card>\n                            <Card.Header><Link to={`/otheruserpage/${Object.values(sponsor)[0].id}`} > <h4 style={{textAlign:'center'}}>{Object.values(sponsor)[0].username}</h4> </Link></Card.Header>\n                        <Card.Content style={{textAlign:'center'}}>\n                            <Image style={{margin:'auto'}} src={Object.values(sponsor)[0].profile_pic? Object.values(sponsor)[0].profile_pic: \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='small' circular />\n                        </Card.Content>\n                            <Card.Content extra>\n                            <Icon name='user' />\n                             {Object.keys(sponsor)[0]} sponsors\n                        </Card.Content>\n                    </Card>\n\n                    \n                    \n                \n\n                )\n        })\n    }\n    if (users.length > 0){\n       topReaders = users.sort(function (a, b){\n            return   (b.waitings.filter(waiting=>waiting.fulfilled===true).length) - (a.waitings.filter(waiting=>waiting.fulfilled===true).length) \n        })  \n        console.log(topReaders)\n        topReadersMapped = topReaders.slice(0,3).map(reader=>{\n            return( \n                    <Card>\n                        <Card.Header><Link to={`/otheruserpage/${reader.id}`}> <h4 style={{textAlign:'center'}}>{reader.username} </h4></Link></Card.Header>\n                        <Card.Content style={{textAlign:'center'}}>\n                            <Image src={reader.profile_pic ? reader.profile_pic : \"https://www.xovi.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png\"} size='small' circular />\n                        </Card.Content>\n                            <Card.Content extra>\n                            <Icon name='book' />\n                             {reader.waitings.filter(waiting=>waiting.fulfilled===true).length } Books Read\n                        </Card.Content>\n                    </Card>\n\n                \n                \n\n                )\n        })\n        \n    }\n    \n    return(\n        <>\n            <div className=\"home-info\">\n                <h2 className=\"who\">\n                    Who we are\n                    \n                </h2>\n                <p style={{fontSize: '15px'}}>\n                    If you've ever read an impactful book that you'd like to share with others, BookFund is the place for you!\n                    <br></br>\n                    BookFund is a simple way for users to sponsor books they love and share the knowledge with others. \n                    <br></br>\n                    Users can sign up for a book via a waitlist to receive the next sponsored copy of that book. After receiving a book, users must publish a review of the book on the site, as well as enter a two week wait period before they are eligible to receive their next book.\n                </p>\n            </div>\n\n                <h2 className=\"pop\" >Popular Now</h2>\n            <div className=\"popular-now\">\n                {waitingsMapped.length >0 ? \n                <Card.Group itemsPerRow={8}>\n                    {waitingsMapped}  \n                </Card.Group>\n                :null} \n            </div>\n                <div className=\"buttons-combined\">\n                    <Button className=\"next-back-button\"  onClick={()=>setIndex(index+8)}>Next</Button>\n                    {index > 0 ? <Button className=\"next-back-button\" onClick={()=>setIndex(index-8)}>Back</Button>: null}\n                </div>\n            <div style={{display:'flex',marginTop: '50px'}}className=\"bottom-home\">\n                 <div className=\"top-readers-home\">\n                    <h4>Top Readers:</h4>\n                    <Card.Group itemsPerRow={3}>\n                        {topReadersMapped.length>0 ? topReadersMapped :null}\n                    </Card.Group>\n                </div>\n\n                <div className=\"top-sponsors-home\">\n                    <h4>Top Sponsors:</h4>\n                    <Card.Group itemsPerRow={3}>\n                        {sponsorsMapped.length>0 ? sponsorsMapped :null}\n                    </Card.Group>\n                </div>\n\n                \n                \n                \n            </div>\n        </>\n    )\n}","import React, {useState, useRef, useEffect} from 'react'\n\n \nconst Timer = ({mostRecent, timeLeft, setTimeLeft, displayTimer, setDisplayTimerTwo, reviewLeft })=>{\n    // console.log('timer')\n    // console.log('reviewleft:', reviewLeft)\n    // console.log('timeleft:', timeLeft)\n    // console.log('mostRecent!== null:', (mostRecent!== null))\n\n    const [timerDays, setTimerDays] = useState(0)\n    const [timerHours, setTimerHours] = useState(0)\n    const [timerMinutes, setTimerMinutes] = useState(0)\n    const [timerSeconds, setTimerSeconds] = useState(0)\n\n\n    let interval = useRef()\n\n    const startTimer = () => {\n\n        // const countDownDate = new Date(parseInt(mostRecent.sponsor_date)+1209600000)\n        const countDownDate = new Date(parseInt(mostRecent.sponsor_date)+60000)\n\n   \n        interval = setInterval(()=>{\n            const now = new Date().getTime()\n            const timeRemaining = countDownDate - now\n\n            const days = Math.floor(timeRemaining / (1000 * 60 * 60 *24))\n            const hours = Math.floor((timeRemaining % (1000 * 60 * 60 *24) / (1000*60*60)))\n            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60) / (1000 * 60)))\n            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000)\n            \n            if (timeRemaining < 0){\n                // debugger\n                setTimeLeft(false)\n                clearInterval(interval.current)\n                displayTimer = false\n                setDisplayTimerTwo(false)\n            }\n            else{\n                //update timer\n                setTimerDays(days)\n                setTimerHours(hours)\n                setTimerMinutes(minutes)\n                setTimerSeconds(seconds)\n            }\n\n        }, 1000)\n    }\n\n    useEffect(()=>{\n        startTimer()\n        return()=>{\n            clearInterval(interval.current)\n        }\n    })\n    \n    return (\n        \n\n        <div class=\"container\">\n            <h1 id=\"headline\">Countdown until your next book:</h1>\n                <div id=\"countdown\">\n                    <ul>\n                        <li><span id=\"numbers\">{timerDays}</span>days</li>\n                        <li><span id=\"numbers\">{timerHours}</span>Hours</li>\n                        <li><span id=\"numbers\">{timerMinutes}</span>Minutes</li>\n                        <li><span id=\"numbers\">{timerSeconds} </span>Seconds</li>\n                    </ul>\n                </div>\n          </div>\n         \n    )\n}\n\nexport default Timer\n\n\n\n ","import { Card, Button } from 'semantic-ui-react'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport React, { useState } from \"react\"\n\nexport default function SponsorList({allWaitings, user, savedBooks}){\n    \n    let sponsoredWaitings = []\n    let sponsoredMapped = []\n\n    const [sponsoredIndex, setSponsoredIndex] = useState(0)\n\n    if (allWaitings.length > 0){\n        sponsoredWaitings = allWaitings.filter(waiting=>waiting.sponsor_id === user.id)\n        if (sponsoredWaitings.length > 0){\n            let arrTwo = []\n            arrTwo.push(sponsoredWaitings[0])\n            for (let i=1;i < sponsoredWaitings.length;i++){\n                if (arrTwo.find(elem=>elem.book_id===sponsoredWaitings[i].book_id))\n                {\n                    \n                }\n                else{\n                    arrTwo.push(sponsoredWaitings[i])\n                }\n            }\n            sponsoredMapped = arrTwo.map(waiting=>{ //create JSX of books\n                return (<BackEndBookCard book={savedBooks.find(savedBook => savedBook.id === waiting.book_id)}/>)\n            })\n            console.log(sponsoredMapped)\n        }\n    }    \n    return (\n            <>\n                <div className=\"userpage-book-display\">\n                    <Card.Group itemsPerRow={8}>\n                        {sponsoredMapped.slice(sponsoredIndex, sponsoredIndex+8)}  \n                    </Card.Group>\n                </div>\n\n                <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex+8)}>Next</Button>\n                {sponsoredIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex-8)}>Back</Button> : null}\n            </>\n            )\n}","import React, { useState } from \"react\"\nimport { Card, Button } from 'semantic-ui-react'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\n\nexport default function WaitList({waitlistMapped, user, savedBooks}){\n    const [waitlistIndex, setWaitlistIndex] = useState(0)\n\n    let waitingsMapped = []\n\n     //get all unfulfilled waitings for a user\n    let waitingsUnfulfilled = user.waitings.filter(waiting=>waiting.fulfilled!==true)\n    for(let i=0;i<waitingsUnfulfilled.length;i++){\n        waitingsMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsUnfulfilled[i].book_id))\n    } \n    if (waitingsMapped.length > 0){\n        waitlistMapped = waitingsMapped.map(waiting=>{ //create JSX of books\n            return (<BackEndBookCard book={waiting}/>)\n        })\n    }       \n\n    function handleNextClick(){\n        if (waitlistIndex < waitlistMapped.length){\n            if (waitlistMapped.length - waitlistIndex > 8){\n                setWaitlistIndex(waitlistIndex+8)\n            }\n            else{\n            setWaitlistIndex(0)\n            }\n        }\n    }\n    if (waitingsMapped.length > 0 ){\n        return(\n        <>\n            <div className=\"userpage-book-display\">\n                <Card.Group itemsPerRow={8}>\n                    {waitlistMapped.slice(waitlistIndex, waitlistIndex+8)}  \n                </Card.Group>\n            </div>\n            <Button className=\"next-back-button\"  onClick={handleNextClick}>Next</Button>\n            {waitlistIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setWaitlistIndex(waitlistIndex-8)}>Back</Button>: null}\n        </>\n        ) \n    }    \n    else{\n        return null\n    }\n    \n}","import { Card, Button } from 'semantic-ui-react'\nimport React, { useState } from \"react\"\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\n\n\n\nexport default function ReceivedList({savedBooks, waitingsFulFilledMapped, waitlistMapped}){\n\n    const [index, setIndex] = useState(0)\n    let receivedMapped = null\n\n     if (savedBooks.length > 0){\n        receivedMapped = waitingsFulFilledMapped.map(waiting=>{ //create JSX of books\n            return (<BackEndBookCard book={waiting}/>)\n        })\n    }\n\n    function handleNextClick(){\n        if (index < waitlistMapped.length){\n            if (waitlistMapped.length - index > 8){\n                setIndex(index+8)\n            }\n            else{\n            setIndex(0)\n            }\n        }\n    }\n\n\n    return (\n        <>\n            <div className=\"userpage-book-display\">\n                <Card.Group itemsPerRow={8}>\n                    {receivedMapped.slice(index, index+8)}  \n                </Card.Group>\n            </div>\n            <Button className=\"next-back-button\"  onClick={()=>handleNextClick(index+8)}>Next</Button>\n            {index > 0 ? <Button className=\"next-back-button\"  onClick={()=>setIndex(index-8)}>Back</Button>: null}\n        </>\n    )\n}","\nimport React, { useState, useEffect } from \"react\"\nimport { Redirect } from \"react-router-dom\";\nimport Timer from './Timer'\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport { Image } from 'semantic-ui-react'\nimport SponsorList from './SponsorList'\nimport WaitList from \"./WaitList\";\nimport ReceivedList from './ReceivedList'\n\nexport default function UserPage({user, savedBooks, timeLeft, setTimeLeft, reviewLeft, setReviewLeft}){\n\n    let waitingsFulFilledMapped = []\n    let mostRecent = {}\n    let foundBook = null\n    let foundReview = null\n    let waitlistMapped = 0\n    let displayTimer = false\n    \n    const [allWaitings, setAllWaitings] = useState([])\n    const [displayTimerTwo, setDisplayTimerTwo] = useState(true)\n    \n    useEffect(()=>{\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n    .then(response=>response.json())\n    .then(data=>setAllWaitings(data))\n    },[])\n    \n    if (user){ \n        // if user has no waitings, they're eligible\n        if (user.waitings.length < 1){\n            console.log(`setTimeLeft(false)`)\n             setTimeLeft(false)\n             setReviewLeft(true)\n        }\n\n        let waitingsFulfilled = user.waitings.filter(waiting=>waiting.fulfilled===true) //get all fulfilled waitings for a user\n        for(let i=0;i<waitingsFulfilled.length;i++){\n            waitingsFulFilledMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsFulfilled[i].book_id)) //create an array of those books by comparing to saved books\n        } \n        \n        if (waitingsFulfilled.length < 1){\n             setReviewLeft(true)\n        }\n        \n        if (waitingsFulfilled.length > 0){\n            mostRecent = (waitingsFulfilled.sort(function (a, b){ // find most recent received\n                return b.id - a.id\n            })[0])\n            if (Object.keys(mostRecent).length !== 0){ // if theres not most recent book\n                //check mostRecent.waiting date. if no time left between creation and future deadline, setTimeLeft(false), and vice versa\n                let creationDate = new Date(parseInt(mostRecent.sponsor_date)+60000).getTime()\n                let now = new Date().getTime()\n\n                if (now < creationDate){ // wait period has not passed\n                    displayTimer = true\n                }\n                else\n                {\n                    displayTimer = false\n                    console.log(`setTimeLeft(false)`)\n                    setTimeLeft(false)\n                }\n\n            }\n                foundBook = savedBooks.find(book=>book.id===mostRecent.book_id) // find most recently received book based on most recent waiting\n                if (foundBook){\n                    foundReview = foundBook.reviews.find(review=>review.user.id===user.id) // check if they left a review on it\n                    if (foundReview){\n                        setReviewLeft(true)\n                    }\n                    else{\n                        setReviewLeft(false) //if book was found without a review\n                    }\n                    \n                }\n                else{ // if no book is on received list\n                    setReviewLeft(true)\n                }\n        }\n         \n\n    }\n    if (user){\n        // console.log('timeleft:', timeLeft)\n        // console.log('reviewleft:', reviewLeft)\n        // console.log('eligibilty:', user)\n        return(\n        <div className=\"userpage\"> \n\n        <div className=\"userpage-top-half\">\n\n             <div className=\"userpage-eligibility-info\" style={{float:'left'}}>\n                { displayTimer && displayTimerTwo ?\n                <Timer \n                    mostRecent={mostRecent}\n                    timeLeft={timeLeft} \n                    setTimeLeft={setTimeLeft}\n                    displayTimer={displayTimer}\n                    setDisplayTimerTwo={setDisplayTimerTwo}\n                    reviewLeft={reviewLeft}\n                />\n            : null}\n                {displayTimer === false && reviewLeft === true ? <h3>Looks like you're eligible for your next book!</h3> : null}\n                {reviewLeft === false && mostRecent!== null && (user.waitings.length > 0) ? (<div style={{margin:'auto'}} > <h3 >Please leave a review for</h3> <div style={{margin:'auto'}}><BackEndBookCard book={foundBook} style={{margin:'auto'}}/></div> </div>): null}\n            </div>\n\n                <div className=\"userpage-user-info\">\n                    <h3>Profile</h3>\n                    <Image src={user.profile_pic ? user.profile_pic : null} size=\"small\" circular style={{float:'left'}}/>\n                    <div style={{float:'left', marginLeft: '50px'}}>\n                        <h4 style={{display:'inline'}}>Name: </h4>{user.name !== \"undefined\"? user.name : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Email: </h4>{user.email !== \"undefined\" ?  user.email : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Username: </h4>{user.username !== \"undefined\" ? user.username : null }\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Bio: </h4>{user.bio !== \"undefined\" ? user.bio : null}\n                    </div>\n                    \n                </div>\n        \n        \n        </div>\n                <h3 className=\"pop\">Waitlist</h3>\n        \n                <WaitList\n                waitlistMapped={waitlistMapped}\n                user={user}\n                savedBooks={savedBooks}/>\n\n\n                <h3 className=\"pop\">Received</h3>\n                {waitingsFulFilledMapped.length > 0 ? \n                    <ReceivedList\n                    waitingsFulFilledMapped={waitingsFulFilledMapped}\n                    savedBooks={savedBooks}\n                    waitlistMapped={waitlistMapped}/>\n                :null}\n\n\n                <h3 className=\"pop\">Sponsored</h3>\n                <SponsorList\n                allWaitings={allWaitings}\n                savedBooks={savedBooks}\n                user={user}/>\n            </div>\n        )\n\n    }\n    else{\n        return <>\n        Error. Please try again\n            <Redirect to =\"/bookindex\"/>\n        </>\n    }\n}\n\n\n","import React, { useEffect, useState } from \"react\"\nimport BackEndBookCard from '../BookIndex/BackEndBookCard'\nimport {  useParams } from \"react-router-dom\";\nimport { Card, Button, Image } from 'semantic-ui-react'\n\n\n\nexport default function OtherUserPage({savedBooks, timeLeft, setTimeLeft, reviewLeft, setReviewLeft}){\n\n    let waitingsMapped = []\n    let waitingsFulFilledMapped = []\n    let mostRecent = {}\n    let foundBook = null\n    let foundReview = null\n    let receivedMapped = null\n    let waitlistMapped = null\n    let displayTimer = false\n    let sponsoredWaitings = []\n    let sponsoredMapped = []\n    \n    const [allWaitings, setAllWaitings] = useState([])\n    const [index, setIndex] = useState(0)\n    const [waitlistIndex, setWaitlistIndex] = useState(0)\n    const [sponsoredIndex, setSponsoredIndex] = useState(0)\n    const [user, setUser] = useState(null)\n    const params = useParams()\n\n    useEffect(()=>{\n        fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${params.id}`)\n        .then(response => response.json())\n        .then(data=>setUser(data))  \n    },[params.id])\n    \n\n    useEffect(()=>{\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/waitings`)\n    .then(response=>response.json())\n    .then(data=> setAllWaitings(data))\n    },[])\n    \n    if (user){ \n        if (user.waitings.length < 1){\n            console.log(`setTimeLeft(false)`)\n             setTimeLeft(false)\n             setReviewLeft(true)\n        }\n\n        let waitingsUnfulfilled = user.waitings.filter(waiting=>waiting.fulfilled!==true)//get all unfulfilled waitings for a user\n        for(let i=0;i<waitingsUnfulfilled.length;i++){\n            waitingsMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsUnfulfilled[i].book_id))//create an array of those books by comparing to saved books\n        } \n        if (waitingsMapped.length > 0){\n            waitlistMapped = waitingsMapped.map(waiting=>{ //create JSX of books\n                return (<BackEndBookCard book={waiting}/>)\n            })\n        }\n        if (allWaitings.length > 0){\n            sponsoredWaitings = allWaitings.filter(waiting=>waiting.sponsor_id === user.id)\n\n            \n            if (sponsoredWaitings.length > 0){\n                let arrTwo = []\n                arrTwo.push(sponsoredWaitings[0])\n                for (let i=1;i < sponsoredWaitings.length;i++){\n                    if (arrTwo.find(elem=>elem.book_id===sponsoredWaitings[i].book_id))\n                    {\n                        \n                    }\n                    else{\n                        arrTwo.push(sponsoredWaitings[i])\n                    }\n                    \n                }\n\n                sponsoredMapped = arrTwo.map(waiting=>{ //create JSX of books\n                    return (<BackEndBookCard book={savedBooks.find(savedBook => savedBook.id === waiting.book_id)}/>)\n                })\n            }\n            }        \n\n\n        let waitingsFulfilled = user.waitings.filter(waiting=>waiting.fulfilled===true) //get all fulfilled waitings for a user\n        for(let i=0;i<waitingsFulfilled.length;i++){\n            waitingsFulFilledMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsFulfilled[i].book_id)) //create an array of those books by comparing to saved books\n        } \n        \n        if (waitingsFulfilled.length < 1){\n             setReviewLeft(true)\n         }\n\n\n\n        if (savedBooks.length > 0){\n            receivedMapped = waitingsFulFilledMapped.map(waiting=>{ //create JSX of books\n                return (<BackEndBookCard book={waiting}/>)\n            })\n        }\n        \n        \n        if (waitingsFulfilled.length > 0){\n            mostRecent = (waitingsFulfilled.sort(function (a, b){ // find most recent received\n                return b.id - a.id\n            })[0])\n            if (Object.keys(mostRecent).length !== 0){ // if theres not most recent book\n                \n                //check mostRecent.waiting date. if no time left between creation and future deadline, setTimeLeft(false), and vice versa\n                let creationDate = new Date(parseInt(mostRecent.sponsor_date)+60000).getTime()\n                let now = new Date().getTime()\n\n                if (now < creationDate){ // wait period has not passed\n                    displayTimer = true\n                }\n                else\n                {\n                    displayTimer = false\n                    console.log(`setTimeLeft(false)`)\n                    setTimeLeft(false)\n                }\n\n            }\n                foundBook = savedBooks.find(book=>book.id===mostRecent.book_id) // find most recently received book based on most recent waiting\n                if (foundBook){\n                    foundReview = foundBook.reviews.find(review=>review.user.id===user.id) // check if they left a review on it\n                    if (foundReview){\n                        setReviewLeft(true)\n                    }\n                    else{\n                        setReviewLeft(false) //if book was found without a review\n                    }\n                    \n                }\n                else{ // if no book is on received list\n                    setReviewLeft(true)\n                }\n        } \n    }\n    \n    function handleNextClick(){\n        if (waitlistIndex < waitlistMapped.length){\n            if (waitlistMapped.length - waitlistIndex > 8){\n                setWaitlistIndex(waitlistIndex+8)\n            }\n            else{\n            setWaitlistIndex(0)\n            }\n        }\n    }\n\n    if (user){\n        console.log('timeleft:', timeLeft)\n        console.log('reviewleft:', reviewLeft)\n        return(\n        <div className=\"userpage\"> \n\n        <div className=\"userpage-top-half\">\n\n             <div className=\"userpage-eligibility-info\" style={{float:'left'}}>\n                \n                {user.eligible? <h3>Looks like {user.username} is eligible for their next book!</h3> : <h3>Looks like {user.username} needs to wait two weeks or leave a review to be eligible for their next book!</h3>}\n                {/* {reviewLeft === false && mostRecent!== null && (user.waitings.length > 0) ? (<div style={{margin:'auto'}} > <h3 >Please leave a review for</h3> <div style={{margin:'auto'}}><BackEndBookCard book={foundBook} style={{margin:'auto'}}/></div> </div>): null} */}\n            </div>\n\n                <div className=\"userpage-user-info\">\n                    <h3>Profile</h3>\n                    <Image src={user.profile_pic ? user.profile_pic : null} size=\"small\" circular style={{float:'left'}}/>\n                    <div style={{float:'left', marginLeft: '50px'}}>\n                        <h4 style={{display:'inline'}}>Name: </h4>{user.name ? user.name : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Email: </h4>{user.email ?  user.email : null}\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Username: </h4>{user.username ? user.username : null }\n                        <br></br>\n                        <br></br>\n                        <h4 style={{display:'inline'}}>Bio: </h4>{user.bio ? user.bio : null}\n                    </div>\n                    \n                </div>\n                \n\n        </div>\n           \n\n                <h3 className=\"pop\">Waitlist</h3>\n                {waitingsMapped.length > 0 ? \n                    <>\n                        <div className=\"userpage-book-display\">\n                            <Card.Group itemsPerRow={8}>\n                                {waitlistMapped.slice(waitlistIndex, waitlistIndex+8)}  \n                            </Card.Group>\n                        </div>\n                        <Button className=\"next-back-button\"  onClick={handleNextClick}>Next</Button>\n                        {waitlistIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setIndex(waitlistIndex-8)}>Back</Button>: null}\n                    </>\n                :null}\n\n                <h3 className=\"pop\">Received</h3>\n                {waitingsFulFilledMapped.length > 0 ? \n                    <>\n                        <div className=\"userpage-book-display\">\n                            <Card.Group itemsPerRow={8}>\n                                {receivedMapped.slice(index, index+8)}  \n                            </Card.Group>\n                        </div>\n                        <Button className=\"next-back-button\"  onClick={()=>setIndex(index+8)}>Next</Button>\n                        {index > 0 ? <Button className=\"next-back-button\"  onClick={()=>setIndex(index-8)}>Back</Button>: null}\n                    </>\n                :null}\n\n\n                <h3 className=\"pop\">Sponsored</h3>\n                {sponsoredMapped.length > 0 ?\n                    <>\n                        <div className=\"userpage-book-display\">\n                            <Card.Group itemsPerRow={8}>\n                                {sponsoredMapped.slice(sponsoredIndex, sponsoredIndex+8)}  \n                            </Card.Group>\n                        </div>\n                        <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex+8)}>Next</Button>\n                        {sponsoredIndex > 0 ? <Button className=\"next-back-button\"  onClick={()=>setSponsoredIndex(sponsoredIndex-8)}>Back</Button>: null}\n                    </>\n                :null}\n\n            </div>\n        )\n\n    }\n    else{\n        return <>\n        Loading\n        \n        </>\n    }\n}\n\n\n// export default function OtherUserPage({savedBooks}){\n\n//     const [otherUser, setOtherUser] = useState(null)\n\n//     const params = useParams()\n//     let waitingsMapped = []\n//     let waitlistMapped = []\n    \n\n//     useEffect(()=>{\n//         fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${params.id}`)\n//         .then(response => response.json())\n//         .then(data=>setOtherUser(data))  \n//     },[])\n\n\n//     if (otherUser && savedBooks.length > 0){  \n\n//         let waitingsUnfulfilled = otherUser.waitings.filter(waiting=>waiting.fulfilled!==true)\n//         for(let i=0;i<waitingsUnfulfilled.length;i++){\n//         waitingsMapped.push(savedBooks.find(saved_book => saved_book.id === waitingsUnfulfilled[i].book_id))\n//         } \n//         waitlistMapped = waitingsMapped.map(waiting=>{\n//             return (<BackEndBookCard book={waiting}/>)\n//         })\n \n//         return(\n//             <div> \n//                 <img src={otherUser.profile_pic ? otherUser.profile_pic : null}></img>\n//                 <p>name: {otherUser.name ? otherUser.name : null}</p>\n//                 <p>email: {otherUser.email ? otherUser.email : null}</p>\n//                 <p>username: {otherUser.username ? otherUser.username : null }</p>\n//                 <p>bio: {otherUser.bio ? otherUser.bio : null}</p>\n//                 <p>waitlist:</p>\n//                 <ul>{waitingsMapped.length > 0 ? waitlistMapped:null}</ul>\n//             </div>\n//         )\n//     }\n    \n//     else{\n//         return <p>loading</p>\n//     }\n// }\n","import './App.css';\nimport 'semantic-ui-css/semantic.min.css'\nimport MainNav from './components/pages/MainNav/MainNav'\nimport {Route, Switch, Redirect} from 'react-router-dom'\nimport React, { useEffect, useState } from \"react\"\nimport BookIndex from './components/pages/BookIndex/BookIndex'\nimport BookPage from './components/pages/BookPage/BookPage'\nimport Home from './components/pages/Home/Home'\nimport UserPage from './components/pages/UserPage/UserPage'\nimport OtherUserPage from './components/pages/OtherUserPage/OtherUserPage'\n\nfunction App() {\n\n  const [booksFromSearch, setBooksFromSearch] = useState([])\n  const [user, setUser] = useState(null)\n  const [savedBooks, setSavedBooks] = useState([])\n  const [startIndex, setStartIndex] = useState(0)\n  const [timeLeft, setTimeLeft] = useState(true)\n  const [reviewLeft, setReviewLeft] = useState(false)\n\n  \n  useEffect(()=>{\n    setTimeLeft(true)\n    setReviewLeft(false)\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/books`)\n    .then(response=>response.json())\n    .then(data=>setSavedBooks(data))\n  },[user])\n\n\n  useEffect(()=>{\n    if (user){\n      if (timeLeft === false && reviewLeft === true){\n        let confObj = {\n              method: 'PATCH',\n              headers: {\n                  'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({eligible: true}),\n          }\n          fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${user.id}`, confObj)\n      }\n      if (timeLeft === true || reviewLeft === false){\n        let confObj = {\n              method: 'PATCH',\n              headers: {\n                  'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({eligible: false}),\n          }\n          fetch(`${process.env.REACT_APP_API_BASE_URL}/users/${user.id}`, confObj)\n      }\n    }\n  },[timeLeft, reviewLeft, savedBooks, user])\n\n\n  return (\n    <div className=\"app\">\n    <MainNav\n      setUser={setUser}\n      user={user}\n      setBooksFromSearch={setBooksFromSearch}\n      startIndex={startIndex}\n      setStartIndex={setStartIndex}\n    />\n      <Switch>\n        <Redirect exact from=\"/\" to=\"/home\" />\n        <Route path=\"/home\">\n          <Home />\n        </Route>\n        <Route path=\"/bookindex\">\n          <BookIndex \n            booksFromSearch={booksFromSearch}\n            startIndex={startIndex}\n            setStartIndex={setStartIndex}\n          />\n        </Route>\n        <Route path=\"/bookpage/:id\">\n          <BookPage \n          savedBooks={savedBooks} \n          setSavedBooks={setSavedBooks} \n          user={user} \n          setUser={setUser}\n          reviewLeft={reviewLeft}\n          timeLeft={timeLeft}\n          setBooksFromSearch={setBooksFromSearch}\n          startIndex={startIndex}\n          setStartIndex={setStartIndex}\n        />\n        </Route>\n        <Route path=\"/otheruserpage/:id\">\n          <OtherUserPage \n          user={user} \n          savedBooks={savedBooks} \n          timeLeft={timeLeft} \n          setTimeLeft={setTimeLeft}\n          reviewLeft={reviewLeft}\n          setReviewLeft={setReviewLeft}/>\n        </Route>\n        <Route exact path=\"/userpage\">\n          {user ? \n          <UserPage \n          user={user} \n          savedBooks={savedBooks} \n          timeLeft={timeLeft} \n          setTimeLeft={setTimeLeft}\n          reviewLeft={reviewLeft}\n          setReviewLeft={setReviewLeft}\n          />: <Redirect to = \"/home\"/>}\n          \n        </Route>\n        {/* <Route exact path=\"/login\">\n          <LogIn \n          setUser={setUser}\n          user={user}/>\n        </Route>\n        <Route exact path=\"/signup\">\n          <SignUp \n          setUser={setUser}\n          user={user}/>\n        </Route> */}\n      </Switch>\n    </div>\n  \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter} from 'react-router-dom'\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}